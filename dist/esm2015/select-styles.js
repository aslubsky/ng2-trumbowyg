export class TrumbowygSelectStylesPlugin {
    static init(editor, lang) {
        TrumbowygSelectStylesPlugin.editor = editor;
        TrumbowygSelectStylesPlugin.lang = lang;
        editor.plugins.selectStyles = {
            init: function (trumbowyg) {
                trumbowyg.o.plugins.selectStyles = trumbowyg.o.plugins.selectStyles || {};
                trumbowyg.addBtnDef('selectStyles', {
                    fn: function (params) {
                        TrumbowygSelectStylesPlugin.selectStylesCb(params, trumbowyg);
                    }
                });
            },
            tag: 'img'
        };
    }
    static selectStylesCb(params, t) {
        var pfx = t.o.prefix;
        var html = [];
        html.push('<div class="modal-container styles-select">');
        html.push('   <ul class="styles-list template-gallery list-unstyled">');
        TrumbowygSelectStylesPlugin.allStyles.forEach((style) => {
            html.push('   <li title="' + style.description + '" class="item style"><label>' +
                '<img src="' + style.icon + '" class="select-template-icon"><input type="radio" value="' + style.id + '" name="template">' +
                '<span class="title"> ' + style.title + '</span>' +
                '</label></li>');
        });
        html.push('   </ul>');
        html.push('</div>');
        var selectedImageIndex = null;
        var $modal = t.openModal(TrumbowygSelectStylesPlugin.editor.langs[TrumbowygSelectStylesPlugin.lang].selectTemplatesStyle, html.join(''))
            .on('tbwconfirm', function () {
            var selected = jQuery('input:checked', $modal);
            if (selected.length > 0) {
                var styleId = parseInt(selected.val(), 10);
                // console.log('styleId', styleId);
                var editor = $modal.parent().find('.trumbowyg-editor');
                editor.find('.customStyle').remove();
                editor.append('<style class="customStyle">@import url(https://ets.davintoo.com/uploads/css/' + styleId + '.css);</style>');
                t.syncTextarea();
                t.$c.trigger('tbwchange');
            }
            setTimeout(function () {
                t.closeModal();
            }, 250);
        })
            .on('tbwcancel', function () {
            t.restoreRange();
            t.closeModal();
        });
        $modal.addClass('big');
        jQuery('.styles-list li label', $modal).off('click').on('click', function (e) {
            jQuery('.styles-list li', $modal).removeClass('active');
            jQuery(this).parent().addClass('active');
        });
    }
    ;
    static setStyles(allStyles) {
        TrumbowygSelectStylesPlugin.allStyles = allStyles;
    }
}
TrumbowygSelectStylesPlugin.allStyles = [];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LXN0eWxlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZWxlY3Qtc3R5bGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE1BQU0sT0FBTywyQkFBMkI7SUFNN0IsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFXLEVBQUUsSUFBWTtRQUN4QywyQkFBMkIsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO1FBQzVDLDJCQUEyQixDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7UUFDeEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxZQUFZLEdBQUc7WUFDMUIsSUFBSSxFQUFFLFVBQVUsU0FBYztnQkFDMUIsU0FBUyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksSUFBSSxFQUFFLENBQUM7Z0JBRTFFLFNBQVMsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFO29CQUNoQyxFQUFFLEVBQUUsVUFBVSxNQUFXO3dCQUNyQiwyQkFBMkIsQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO29CQUNsRSxDQUFDO2lCQUNKLENBQUMsQ0FBQztZQUNQLENBQUM7WUFDRCxHQUFHLEVBQUUsS0FBSztTQUNiLENBQUE7SUFDTCxDQUFDO0lBRU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxNQUFXLEVBQUUsQ0FBTTtRQUU3QyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztRQUNyQixJQUFJLElBQUksR0FBYSxFQUFFLENBQUM7UUFFeEIsSUFBSSxDQUFDLElBQUksQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxJQUFJLENBQUMsNERBQTRELENBQUMsQ0FBQztRQUN4RSwyQkFBMkIsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBVyxFQUFFLEVBQUU7WUFDMUQsSUFBSSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsV0FBVyxHQUFHLDhCQUE4QjtnQkFDM0UsWUFBWSxHQUFHLEtBQUssQ0FBQyxJQUFJLEdBQUcsNERBQTRELEdBQUcsS0FBSyxDQUFDLEVBQUUsR0FBRyxvQkFBb0I7Z0JBQzFILHVCQUF1QixHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsU0FBUztnQkFDakQsZUFBZSxDQUFDLENBQUM7UUFDekIsQ0FBQyxDQUFDLENBQUM7UUFDSCxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFcEIsSUFBSSxrQkFBa0IsR0FBVyxJQUFJLENBQUM7UUFDdEMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLDJCQUEyQixDQUFDLElBQUksQ0FBQyxDQUFDLG9CQUFvQixFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7YUFDbkksRUFBRSxDQUFDLFlBQVksRUFBRTtZQUNkLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxlQUFlLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFL0MsSUFBSSxRQUFRLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtnQkFDckIsSUFBSSxPQUFPLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDNUMsbUNBQW1DO2dCQUNsQyxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQ3ZELE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7Z0JBQ3JDLE1BQU0sQ0FBQyxNQUFNLENBQUMsOEVBQThFLEdBQUcsT0FBTyxHQUFHLGdCQUFnQixDQUFDLENBQUM7Z0JBQzNILENBQUMsQ0FBQyxZQUFZLEVBQUUsQ0FBQztnQkFDakIsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7YUFDN0I7WUFFRCxVQUFVLENBQUM7Z0JBQ1AsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1lBQ25CLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNaLENBQUMsQ0FBQzthQUNELEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDYixDQUFDLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDakIsQ0FBQyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO1FBRVAsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUV2QixNQUFNLENBQUMsdUJBQXVCLEVBQUUsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsVUFBVSxDQUFLO1lBQzVFLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxNQUFNLENBQUMsQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDeEQsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUM7SUFBQSxDQUFDO0lBRUssTUFBTSxDQUFDLFNBQVMsQ0FBQyxTQUFnQjtRQUNwQywyQkFBMkIsQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO0lBQ3RELENBQUM7O0FBekVhLHFDQUFTLEdBQVUsRUFBRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiZGVjbGFyZSB2YXIgalF1ZXJ5OiBhbnk7XG5cbmV4cG9ydCBjbGFzcyBUcnVtYm93eWdTZWxlY3RTdHlsZXNQbHVnaW4ge1xuICAgIHB1YmxpYyBzdGF0aWMgYWxsU3R5bGVzOiBhbnlbXSA9IFtdO1xuXG4gICAgcHVibGljIHN0YXRpYyBlZGl0b3I6IGFueTtcbiAgICBwdWJsaWMgc3RhdGljIGxhbmc6IHN0cmluZztcblxuICAgIHB1YmxpYyBzdGF0aWMgaW5pdChlZGl0b3I6IGFueSwgbGFuZzogc3RyaW5nKSB7XG4gICAgICAgIFRydW1ib3d5Z1NlbGVjdFN0eWxlc1BsdWdpbi5lZGl0b3IgPSBlZGl0b3I7XG4gICAgICAgIFRydW1ib3d5Z1NlbGVjdFN0eWxlc1BsdWdpbi5sYW5nID0gbGFuZztcbiAgICAgICAgZWRpdG9yLnBsdWdpbnMuc2VsZWN0U3R5bGVzID0ge1xuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKHRydW1ib3d5ZzogYW55KSB7XG4gICAgICAgICAgICAgICAgdHJ1bWJvd3lnLm8ucGx1Z2lucy5zZWxlY3RTdHlsZXMgPSB0cnVtYm93eWcuby5wbHVnaW5zLnNlbGVjdFN0eWxlcyB8fCB7fTtcblxuICAgICAgICAgICAgICAgIHRydW1ib3d5Zy5hZGRCdG5EZWYoJ3NlbGVjdFN0eWxlcycsIHtcbiAgICAgICAgICAgICAgICAgICAgZm46IGZ1bmN0aW9uIChwYXJhbXM6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgVHJ1bWJvd3lnU2VsZWN0U3R5bGVzUGx1Z2luLnNlbGVjdFN0eWxlc0NiKHBhcmFtcywgdHJ1bWJvd3lnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRhZzogJ2ltZydcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIHNlbGVjdFN0eWxlc0NiKHBhcmFtczogYW55LCB0OiBhbnkpIHtcblxuICAgICAgICB2YXIgcGZ4ID0gdC5vLnByZWZpeDtcbiAgICAgICAgdmFyIGh0bWw6IHN0cmluZ1tdID0gW107XG5cbiAgICAgICAgaHRtbC5wdXNoKCc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGFpbmVyIHN0eWxlcy1zZWxlY3RcIj4nKTtcbiAgICAgICAgaHRtbC5wdXNoKCcgICA8dWwgY2xhc3M9XCJzdHlsZXMtbGlzdCB0ZW1wbGF0ZS1nYWxsZXJ5IGxpc3QtdW5zdHlsZWRcIj4nKTtcbiAgICAgICAgVHJ1bWJvd3lnU2VsZWN0U3R5bGVzUGx1Z2luLmFsbFN0eWxlcy5mb3JFYWNoKChzdHlsZSA6IGFueSkgPT4ge1xuICAgICAgICAgICAgaHRtbC5wdXNoKCcgICA8bGkgdGl0bGU9XCInICsgc3R5bGUuZGVzY3JpcHRpb24gKyAnXCIgY2xhc3M9XCJpdGVtIHN0eWxlXCI+PGxhYmVsPicgK1xuICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicgKyBzdHlsZS5pY29uICsgJ1wiIGNsYXNzPVwic2VsZWN0LXRlbXBsYXRlLWljb25cIj48aW5wdXQgdHlwZT1cInJhZGlvXCIgdmFsdWU9XCInICsgc3R5bGUuaWQgKyAnXCIgbmFtZT1cInRlbXBsYXRlXCI+JyArXG4gICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwidGl0bGVcIj4gJyArIHN0eWxlLnRpdGxlICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAnPC9sYWJlbD48L2xpPicpO1xuICAgICAgICB9KTtcbiAgICAgICAgaHRtbC5wdXNoKCcgICA8L3VsPicpO1xuICAgICAgICBodG1sLnB1c2goJzwvZGl2PicpO1xuXG4gICAgICAgIHZhciBzZWxlY3RlZEltYWdlSW5kZXg6IG51bWJlciA9IG51bGw7XG4gICAgICAgIHZhciAkbW9kYWwgPSB0Lm9wZW5Nb2RhbChUcnVtYm93eWdTZWxlY3RTdHlsZXNQbHVnaW4uZWRpdG9yLmxhbmdzW1RydW1ib3d5Z1NlbGVjdFN0eWxlc1BsdWdpbi5sYW5nXS5zZWxlY3RUZW1wbGF0ZXNTdHlsZSwgaHRtbC5qb2luKCcnKSlcbiAgICAgICAgICAgIC5vbigndGJ3Y29uZmlybScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWQgPSBqUXVlcnkoJ2lucHV0OmNoZWNrZWQnLCAkbW9kYWwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlSWQgPSBwYXJzZUludChzZWxlY3RlZC52YWwoKSwgMTApO1xuICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzdHlsZUlkJywgc3R5bGVJZCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0b3IgPSAkbW9kYWwucGFyZW50KCkuZmluZCgnLnRydW1ib3d5Zy1lZGl0b3InKTtcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLmZpbmQoJy5jdXN0b21TdHlsZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICBlZGl0b3IuYXBwZW5kKCc8c3R5bGUgY2xhc3M9XCJjdXN0b21TdHlsZVwiPkBpbXBvcnQgdXJsKGh0dHBzOi8vZXRzLmRhdmludG9vLmNvbS91cGxvYWRzL2Nzcy8nICsgc3R5bGVJZCArICcuY3NzKTs8L3N0eWxlPicpO1xuICAgICAgICAgICAgICAgICAgICB0LnN5bmNUZXh0YXJlYSgpO1xuICAgICAgICAgICAgICAgICAgICB0LiRjLnRyaWdnZXIoJ3Rid2NoYW5nZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0LmNsb3NlTW9kYWwoKTtcbiAgICAgICAgICAgICAgICB9LCAyNTApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbigndGJ3Y2FuY2VsJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHQucmVzdG9yZVJhbmdlKCk7XG4gICAgICAgICAgICAgICAgdC5jbG9zZU1vZGFsKCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAkbW9kYWwuYWRkQ2xhc3MoJ2JpZycpO1xuXG4gICAgICAgIGpRdWVyeSgnLnN0eWxlcy1saXN0IGxpIGxhYmVsJywgJG1vZGFsKS5vZmYoJ2NsaWNrJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGU6YW55KSB7XG4gICAgICAgICAgICBqUXVlcnkoJy5zdHlsZXMtbGlzdCBsaScsICRtb2RhbCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgalF1ZXJ5KHRoaXMpLnBhcmVudCgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgcHVibGljIHN0YXRpYyBzZXRTdHlsZXMoYWxsU3R5bGVzOiBhbnlbXSkge1xuICAgICAgICBUcnVtYm93eWdTZWxlY3RTdHlsZXNQbHVnaW4uYWxsU3R5bGVzID0gYWxsU3R5bGVzO1xuICAgIH1cbn1cbiJdfQ==