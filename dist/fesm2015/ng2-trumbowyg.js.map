{"version":3,"file":"ng2-trumbowyg.js","sources":["../../src/tidy.ts","../../src/font-size.ts","../../src/fonts.ts","../../src/select-styles.ts","../../src/insert-lead.ts","../../src/insert-media-embed.ts","../../src/insert-table.ts","../../src/select-images.ts","../../src/select-resources.ts","../../src/select-templates.ts","../../src/editor.ts","../../src/module.ts","../../src/ng2-trumbowyg.ts"],"sourcesContent":["import {HttpClient} from '@angular/common/http';\nimport 'rxjs/add/operator/toPromise';\n\nexport class TrumbowygTidyPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string, http: HttpClient) {\n        TrumbowygTidyPlugin.editor = editor;\n\n        editor.plugins.tidy = {\n            init: (t: any) => {\n                // console.log('TrumbowygCodemirrorPlugin');\n\n                t.toggle = () => {\n                    var prefix = t.o.prefix;\n                    t.semanticCode(false, true);\n                    setTimeout(function () {\n                        t.doc.activeElement.blur();\n                        t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                        t.$btnPane.toggleClass(prefix + 'disable');\n                        t.$btnPane.find('.' + prefix + 'viewHTML-button').toggleClass(prefix + 'active');\n                        if (t.$box.hasClass(prefix + 'editor-visible')) {\n                            t.$ta.attr('tabindex', -1);\n                        } else {\n                            if (TrumbowygTidyPlugin.editor.tidyUrl) {\n                                // console.log(t.$ed.html());\n                                http.post(TrumbowygTidyPlugin.editor.tidyUrl, t.$ed.html()).toPromise()\n                                    .then((res: any) => {\n                                        // console.log('tidy res', res.text());\n                                        t.$ta.val(res.text());\n                                    });\n                            }\n                            t.$ta.removeAttr('tabindex');\n                        }\n                    }, 0);\n                };\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygFontSizePlugin {\n    public static editor: any;\n    public static fontSizes: string[] = [];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygFontSizePlugin.editor = editor;\n\n        TrumbowygFontSizePlugin.fontSizes = [];\n\n        var i = 1;\n        for (; i <= 7; i++) {\n            //jQuery.trumbowyg.opts.fontSize.push($filter('translate')(\"Ð Ð°Ð·Ð¼ÐµÑ\") + ' ' + i);\n            TrumbowygFontSizePlugin.fontSizes.push(editor.langs[lang]['fontSize' + i]);\n        }\n\n        // Add all fonts in two dropdowns\n        editor.plugins.fontSize = {\n            init: (trumbowyg: any) => {\n                // console.log('fontSize init');\n                // trumbowyg.o.plugins.fontSize = trumbowyg.o.plugins.fontSize || {};\n                trumbowyg.addBtnDef('fontSize', {\n                    dropdown: TrumbowygFontSizePlugin.buildDropdown('fontSize', trumbowyg)\n                });\n            }\n        }\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        TrumbowygFontSizePlugin.fontSizes.forEach((size: string, i: number) => {\n            var btn = func + '_' + i;\n            trumbowyg.addBtnDef(btn, {\n                fn: (param: any, t: any) => {\n                    //console.info(param, t);\n                    document.execCommand('fontSize', false, param);\n                    t.syncCode();\n                },\n                text: size,\n                param: i + 1\n            });\n            dropdown.push(btn);\n        });\n\n\n        return dropdown;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygFontsPlugin {\n    public static editor: any;\n    public static fonts: string[];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygFontsPlugin.editor = editor;\n\n        // Set default fonts\n        TrumbowygFontsPlugin.fonts = [\n            \"Arial\",\n            \"Courier\",\n            \"Courier New\",\n            \"Georgia\",\n            \"Helvetica\",\n            \"Impact\",\n            \"Monospace\",\n            \"Sans-serif\",\n            \"Serif\",\n            \"Tahoma\",\n            \"Times New Roman\",\n            \"Trebuchet MS\",\n            \"Verdana\"\n        ];\n\n        // Add all fonts in two dropdowns\n        editor.plugins.fontName = {\n            init: function (trumbowyg: any) {\n                // console.log('fontName trumbowyg', trumbowyg);\n                trumbowyg.o.plugins.fontName = trumbowyg.o.plugins.fontName || {};\n                trumbowyg.addBtnDef('fontName', {\n                    dropdown: TrumbowygFontsPlugin.buildDropdown('fontName', trumbowyg)\n                });\n            }\n        }\n\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        TrumbowygFontsPlugin.fonts.forEach((font: string, i: number) => {\n            // console.info('TrumbowygFontsPlugin', font, i);\n            var fontAlias = font.toLowerCase().replace(' ', '').replace('-', '');\n            var btn = func + '_' + fontAlias;\n            trumbowyg.addBtnDef(btn, {\n                fn: function (param: any, t: any) {\n                    // console.info(param, t);\n                    document.execCommand('fontName', false, param);\n                    t.syncCode();\n                },\n                text: font,\n                param: font\n            });\n            dropdown.push(btn);\n        });\n\n\n        return dropdown;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygSelectStylesPlugin {\n    public static allStyles: any[] = [];\n\n    public static editor: any;\n    public static lang: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectStylesPlugin.editor = editor;\n        TrumbowygSelectStylesPlugin.lang = lang;\n        editor.plugins.selectStyles = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectStyles = trumbowyg.o.plugins.selectStyles || {};\n\n                trumbowyg.addBtnDef('selectStyles', {\n                    fn: function (params: any) {\n                        TrumbowygSelectStylesPlugin.selectStylesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static selectStylesCb(params: any, t: any) {\n\n        var pfx = t.o.prefix;\n        var html: string[] = [];\n\n        html.push('<div class=\"modal-container styles-select\">');\n        html.push('   <ul class=\"styles-list template-gallery list-unstyled\">');\n        TrumbowygSelectStylesPlugin.allStyles.forEach((style : any) => {\n            html.push('   <li title=\"' + style.description + '\" class=\"item style\"><label>' +\n                '<img src=\"' + style.icon + '\" class=\"select-template-icon\"><input type=\"radio\" value=\"' + style.id + '\" name=\"template\">' +\n                '<span class=\"title\"> ' + style.title + '</span>' +\n                '</label></li>');\n        });\n        html.push('   </ul>');\n        html.push('</div>');\n\n        var selectedImageIndex: number = null;\n        var $modal = t.openModal(TrumbowygSelectStylesPlugin.editor.langs[TrumbowygSelectStylesPlugin.lang].selectTemplatesStyle, html.join(''))\n            .on('tbwconfirm', function () {\n                var selected = jQuery('input:checked', $modal);\n\n                if (selected.length > 0) {\n                    var styleId = parseInt(selected.val(), 10);\n                   // console.log('styleId', styleId);\n                    var editor = $modal.parent().find('.trumbowyg-editor');\n                    editor.find('.customStyle').remove();\n                    editor.append('<style class=\"customStyle\">@import url(https://ets.davintoo.com/uploads/css/' + styleId + '.css);</style>');\n                    t.syncTextarea();\n                    t.$c.trigger('tbwchange');\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        $modal.addClass('big');\n\n        jQuery('.styles-list li label', $modal).off('click').on('click', function (e:any) {\n            jQuery('.styles-list li', $modal).removeClass('active');\n            jQuery(this).parent().addClass('active');\n        });\n\n    };\n\n    public static setStyles(allStyles: any[]) {\n        TrumbowygSelectStylesPlugin.allStyles = allStyles;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertLeadPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertLeadPlugin.editor = editor;\n\n        editor.plugins.lead = {\n            init: (trumbowyg: any) => {\n                // console.log('lead addBtnDef');\n\n                trumbowyg.addBtnDef('lead', {\n                    fn: () => {\n                        var documentSelection = trumbowyg.doc.getSelection();\n\n                        if (documentSelection.rangeCount) {\n                            var range = documentSelection.getRangeAt(0).cloneRange();\n                            range.surroundContents(jQuery('<p class=\"lead\"/>').get(0));\n                            documentSelection.removeAllRanges();\n                            documentSelection.addRange(range);\n                        }\n\n                        trumbowyg.syncCode();\n\n                        trumbowyg.updateButtonPaneStatus();\n                        trumbowyg.$c.trigger('tbwchange');\n                    }\n                });\n\n                trumbowyg.btnsDef.formatting.dropdown = ['p', 'blockquote', 'lead', 'h1', 'h2', 'h3', 'h4'];\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertMediaEmbedPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertMediaEmbedPlugin.editor = editor;\n\n        editor.plugins.insertMediaEmbed = {\n            init: (trumbowyg: any) => {\n                trumbowyg.o.plugins.insertMediaEmbed = trumbowyg.o.plugins.insertMediaEmbed || {};\n                trumbowyg.addBtnDef('insertMediaEmbed', {\n                    fn: (params: any, t: any) => {\n                        //console.log('insertMediaEmbed');\n                        var t = trumbowyg;\n\n                        var html: string[] = [];\n                        html.push('<div class=\"modal-container\">');\n                        html.push('<div class=\"modal-meadia-embed\">');\n                        html.push('<textarea></textarea>');\n                        html.push('</div>');\n                        html.push('</div>');\n\n                        console.log('insertMediaEmbed');\n\n                        var $modal = t.openModal('Embed Code', html.join(''))\n                            .on('tbwconfirm', () => {\n                                t.restoreRange();\n                                t.syncCode();\n\n                                var code = jQuery('textarea', $modal).val();\n                                if (code) {\n                                    TrumbowygInsertMediaEmbedPlugin.editor.insertHtml(t, code);\n                                }\n\n                                setTimeout(() => {\n                                    t.closeModal();\n                                }, 250);\n                            })\n                            .on('tbwcancel', () => {\n                                t.restoreRange();\n                                t.closeModal();\n                            });\n                    }\n                });\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertTablePlugin {\n    public static editor: any;\n\n    public static elementsCache: any = {};\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertTablePlugin.editor = editor;\n\n        editor.plugins.insertTable = {\n            init: function (trumbowyg: any) {\n                // console.log('trumbowyg', trumbowyg);\n                trumbowyg.o.plugins.insertTable = trumbowyg.o.plugins.insertTable || {};\n                trumbowyg.addBtnDef('insertTable', {\n                    dropdown: TrumbowygInsertTablePlugin.buildDropdown('insertTable', trumbowyg),\n                    tag: 'table'\n                });\n\n                setTimeout(function () {\n                    var i: number = 1;\n                    var j: number = 1;\n                    for (; i <= 10; i++) {\n                        for (j = 1; j <= 10; j++) {\n                            TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j] = trumbowyg.$box.find('.trumbowyg-insertTable_r' + i + '_c' + j + '_insertTable-dropdown-button');\n                        }\n                    }\n\n                    trumbowyg.$box.find('.trumbowyg-insertTable-button')\n                        .off('click')\n                        .on('click', function () {\n                            jQuery('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button').removeClass('active');\n                        });\n\n                    trumbowyg.$box.find('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button')\n                        .off('mouseenter mouseleave')\n                        // .on('hover', (e: any) => {\n                        .hover((e: any) => {\n                            //console.log(e.target.classList);\n                            //$(e.target).attr('class').split('_')\n                            var tmp = jQuery(e.target).attr('class').split('_');\n                            var r = parseInt(tmp[1].replace('r', ''), 10);\n                            var c = parseInt(tmp[2].replace('c', ''), 10);\n                            // console.log('i', tmp, r, c);\n                            TrumbowygInsertTablePlugin.fillCells(r, c);\n\n                            //console.log($(e.target).attr('class').split('_'));\n                        }, (e: any) => {\n                            // console.log(e);\n\n                            var tmp = jQuery(e.target).attr('class').split('_');\n                            var r = parseInt(tmp[1].replace('r', ''), 10);\n                            var c = parseInt(tmp[2].replace('c', ''), 10);\n                            // console.log('o', tmp, r, c);\n                            TrumbowygInsertTablePlugin.fillCells(r, c);\n                        });\n                }, 1000);\n            },\n            //tagHandler: colorTagHandler\n        }\n    }\n\n    private static buildTable(r: number, c: number) {\n        var html: string[] = [];\n        html.push('<table border=\"1\" width=\"100%\">');\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= r; i++) {\n            html.push('<tr>');\n            for (j = 1; j <= c; j++) {\n                html.push('<td>&nbsp;</td>');\n            }\n            html.push('</tr>');\n        }\n        html.push('</table>');\n        return html;\n    }\n\n    private static fillCells(r: number, c: number) {\n        jQuery('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button').removeClass('active');\n\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= r; i++) {\n            for (j = 1; j <= c; j++) {\n                // console.log(TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j]);\n                TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j].addClass('active');\n            }\n        }\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= 10; i++) {\n            for (j = 1; j <= 10; j++) {\n                var btn: string = 'insertTable_r' + i + '_c' + j + '_' + func;\n                // trumbowyg.addBtnDef()\n                // console.log('trumbowyg', trumbowyg);\n                trumbowyg.addBtnDef(btn, {\n                    forceCss: true,\n                    fn: function (params: any) {\n                        var html = TrumbowygInsertTablePlugin.buildTable(params.r, params.c).join('');\n                        // console.info('HTML', params, t, buildTable(params.r, params.c).join(''), html);\n\n                        trumbowyg.restoreRange();\n                        trumbowyg.syncCode();\n\n                        TrumbowygInsertTablePlugin.editor.insertHtml(trumbowyg, html);\n                    },\n                    text: ' ',\n                    param: {\n                        r: i,\n                        c: j\n                    }\n                });\n                dropdown.push(btn);\n            }\n        }\n\n        return dropdown;\n    }\n}\n","import {Directive, Input, Output, EventEmitter, ElementRef, OnInit, OnChanges}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nexport class TrumbowygSelectImagesPlugin {\n    public static editorImages: any[] = [];\n\n    public static editor: any;\n    public static lang: string;\n    public static imagesExtensions: string[] = ['jpg', 'png', 'jpeg', 'bmp', 'gif', 'svg'];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectImagesPlugin.editor = editor;\n        TrumbowygSelectImagesPlugin.lang = lang;\n\n        // console.log('TrumbowygSelectImagesPlugin init', editor);\n\n        editor.plugins.selectImage = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectImage = trumbowyg.o.plugins.selectImage || {};\n                // console.log('selectImage trumbowyg', trumbowyg);\n                trumbowyg.addBtnDef('selectImage', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectImagesPlugin.selectImageCb(params, trumbowyg, TrumbowygSelectImagesPlugin.editorImages);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static selectImageCb(params: any, t: any, editorImages: any[]) {\n        var pfx: string = t.o.prefix;\n        var i: number = 0,\n            l: number = editorImages.length;\n        if (l == 0) {\n            return;\n        }\n\n        var html: string[] = [];\n        var file: any = null;\n        html.push('<div class=\"modal-container\">');\n        html.push('<ul class=\"' + pfx + 'select-images gallery\">');\n        for (; i < l; i++) {\n            html.push('<li class=\"item\" data-i=\"' + i + '\"><label>' +\n                '<img width=\"50px\" src=\"' + editorImages[i].url + '\"/>' + //editorImages[i].name +\n                '</label></li>'\n            );\n        }\n        html.push('</ul>');\n        html.push('</div>');\n\n        var selectedImageIndex: number = null;\n        var $modal = t.openModal(TrumbowygSelectImagesPlugin.editor.langs[TrumbowygSelectImagesPlugin.lang].attachedImages, html.join(''))\n            .on('tbwconfirm', function () {\n                t.restoreRange();\n                t.syncCode();\n\n                if (selectedImageIndex != null) {\n                    var width = editorImages[selectedImageIndex].width || 1024;\n                    t.execCmd('insertImage', editorImages[selectedImageIndex].url);\n                    if (width > 1024) {\n                        jQuery('img[src=\"' + editorImages[selectedImageIndex].url + '\"]:not([alt])', t.$box).attr('width', '1024px');\n                    }\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        jQuery('li.item', $modal).on('click', function () {\n            jQuery('li', $modal).removeClass('active');\n            jQuery(this).addClass('active');\n            selectedImageIndex = jQuery(this).data('i');\n        });\n    };\n\n    public static updateImages(files: any[]) {\n        TrumbowygSelectImagesPlugin.editorImages = [];\n        files.forEach((img: any) => {\n            img.extension = img.extension || img.url.split('.').pop();\n            if (TrumbowygSelectImagesPlugin.imagesExtensions.indexOf(img.extension) != -1) {\n                // if (img.url.substring(0, 8) != '/uploads') {\n                    // img.url = '/uploads' + img.url;\n                // }\n                if (!img.width) {\n                    var imgObj = new Image();\n                    imgObj.setAttribute('data-i', TrumbowygSelectImagesPlugin.editorImages.length + '');\n                    imgObj.onload = function (e) {\n                        if (e.type !== 'error' && (<any>this).width) {\n                            var indx = parseInt((<any>this).getAttribute('data-i'));\n                            TrumbowygSelectImagesPlugin.editorImages[indx].width = (<any>this).width;\n                        }\n                    }\n                    imgObj.src = img.url;\n                    img.width = 1024;\n                }\n                TrumbowygSelectImagesPlugin.editorImages.push(img);\n            }\n        });\n    }\n}\n","import {EventEmitter}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nexport class TrumbowygSelectResourcesPlugin {\n    public static editorResources: any[] = [];\n\n    public static onSearch: EventEmitter<any> = new EventEmitter();\n\n    public static editor: any;\n    public static $modal: any;\n    public static lang: string;\n    public static pfx: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectResourcesPlugin.editor = editor;\n        TrumbowygSelectResourcesPlugin.lang = lang;\n        // TrumbowygSelectResourcesPlugin.onSearch = new EventEmitter();\n\n        editor.plugins.selectResources = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectResources = trumbowyg.o.plugins.selectResources || {};\n                trumbowyg.addBtnDef('selectResources', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectResourcesPlugin.selectResourcesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static translate(str: string) {\n        return TrumbowygSelectResourcesPlugin.editor.langs[TrumbowygSelectResourcesPlugin.lang][str]\n    }\n\n    private static renderList(pfx: string, html: string[], items: any[]) {\n        items.forEach((resource: any) => {\n            // console.log('resource', resource);\n            html.push('<li class=\"item\">');\n            html.push('<label>');\n            html.push('<input type=\"radio\" name=\"r' + pfx + '\" data-id=\"' + resource.id + '\" ' +\n                'title=\"' + resource.title + '\" data-type=\"' + resource.display_type + '\" value=\"' + resource.id + '\"/>');\n            html.push('<strong>' + resource.title + '</strong>');\n            if (resource.description && resource.description.length > 0) {\n                html.push('<br/><i>' + resource.description + '</i>');\n            }\n            html.push('</label>');\n            html.push('</li>');\n        });\n    }\n\n\n    private static selectResourcesCb(params: any, t: any) {\n        var pfx = TrumbowygSelectResourcesPlugin.pfx = t.o.prefix;\n        //console.log('editorResources', editorResources);\n\n        var html: string[] = [];\n\n        html.push('<div class=\"resources-select modal-container\">');\n        html.push('<div class=\"resources-search cbr-input-control\">');\n        html.push('<label for=\"text\" class=\"cbr-label\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesSearch') +'</label>');\n        html.push('<input class=\"cbr-input cbr-input-default cbr-input-email\" type=\"text\">');\n        html.push('<span class=\"cbr-icon-input cbr-icon-input-primary\">');\n        html.push('<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"');\n        html.push('width=\"20\" height=\"20\" viewBox=\"0 0 451 451\" style=\"enable-background:new 0 0 451 451;\" xml:space=\"preserve\">');\n        html.push('<g>');\n        html.push('<path d=\"M447.05,428l-109.6-109.6c29.4-33.8,47.2-77.9,47.2-126.1C384.65,86.2,298.35,0,192.35,0C86.25,0,0.05,86.3,0.05,192.3');\n        html.push('s86.3,192.3,192.3,192.3c48.2,0,92.3-17.8,126.1-47.2L428.05,447c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4');\n        html.push('C452.25,441.8,452.25,433.2,447.05,428z M26.95,192.3c0-91.2,74.2-165.3,165.3-165.3c91.2,0,165.3,74.2,165.3,165.3');\n        html.push('s-74.1,165.4-165.3,165.4C101.15,357.7,26.95,283.5,26.95,192.3z\"/>');\n        html.push('</g>');\n        html.push('</svg>');\n        html.push('</span>');\n        html.push('</div>');\n        html.push('<ul class=\"cbr2-tabs\" role=\"tablist\">');\n        html.push('<li role=\"all\" class=\"cbr2-tabs-itemactive\">');\n        html.push('   <a data-type=\"all\"  role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesAll') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"gallery\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"gallery\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesGallery') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"html\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"html\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesHtmlSite') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"video\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"video\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesVideo') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"audio\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"audio\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesAudio') + '</a>');\n        html.push('</li>');\n        html.push('</ul>');\n        html.push('<div class=\"cbr-tab-content\">');\n        html.push('   <div role=\"tabpanel\" class=\"cbr-tab-pane active\">');\n        html.push('   <ul class=\"resources-list list-unstyled\">');\n        TrumbowygSelectResourcesPlugin.renderList(pfx, html, TrumbowygSelectResourcesPlugin.editorResources);\n        html.push('   </ul>');\n        html.push('</div>');\n        html.push('</div>');\n\n        html.push('</div>');\n\n        //console.log('html', html);\n        var $modal = TrumbowygSelectResourcesPlugin.$modal = t.openModal(TrumbowygSelectResourcesPlugin.translate('selectResourcesHeader'), html.join(''))\n            .on('tbwconfirm', function () {\n\n                var selected = jQuery('input:checked', $modal);\n                console.log('selected', selected);\n\n                var val = selected.val();\n                //var i = parseInt(selected.data('i'), 10);\n                var type = selected.data('type');\n\n                t.restoreRange();\n                t.syncCode();\n\n                if (val) {\n                    if (type === 'mp4') {\n                        type = 'video';\n                    }\n                    if (type === 'mp3' || type === 'acc') {\n                        type = 'audio';\n                    }\n\n                    switch (type) {\n                        case 'gallery':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"gallery\" data-ext=\"' + type + '\" data-gallery-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-gallery.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"640px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-gallery/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                        case 'video':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"video\" data-ext=\"' + type + '\" data-video-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-video.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"480px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-video-player/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                        case 'audio':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"audio\" data-ext=\"' + type + '\" data-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-audio.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"65px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-audio-player/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n\n                            break;\n                        case 'html':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"html\" data-ext=\"' + type + '\" data-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-resource.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"640px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-html-player/dist/index.html?id=' + val + '\" scrolling=\"no\" marginheight=\"0\" data-item-id=\"' + val + '\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                    }\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        jQuery('.cbr2-tabs a', $modal).off('click').on('click', function (e: any) {\n            e.preventDefault();\n\n            jQuery('.cbr2-tabs-item', $modal).removeClass('cbr-tabs-active');\n            jQuery(this).parent().addClass('cbr-tabs-active');\n\n            TrumbowygSelectResourcesPlugin.onSearch.emit({\n                type: jQuery(this).attr('data-type') || 'all',\n                title: jQuery('.cbr-input', $modal).val()\n            });\n        });\n\n        jQuery('.cbr-icon-input', $modal).off('click').on('click', function () {\n            TrumbowygSelectResourcesPlugin.onSearch.emit({\n                type: jQuery(this).attr('data-type') || 'all',\n                title: jQuery('.cbr-input', $modal).val()\n            });\n        });\n    }\n\n    public static updateResources(editorResources: any[]) {\n        TrumbowygSelectResourcesPlugin.editorResources = editorResources;\n        //\n        jQuery('.resources-list', TrumbowygSelectResourcesPlugin.$modal).empty();\n        var lhtml: string[] = [];\n        TrumbowygSelectResourcesPlugin.renderList(TrumbowygSelectResourcesPlugin.pfx, lhtml, editorResources);\n        jQuery('.resources-list', TrumbowygSelectResourcesPlugin.$modal).append(lhtml.join(''));\n    }\n}\n","// import {EventEmitter}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nconst DEFAULT_ICON = 'themes/default/assets/img/t-icon.png';\n\nexport class TrumbowygSelectTemplatesPlugin {\n    public static templates: any[] = [];\n    public static allTemplates: any = {};\n\n    public static editor: any;\n    public static lang: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectTemplatesPlugin.editor = editor;\n        TrumbowygSelectTemplatesPlugin.lang = lang;\n\n        //console.log('init', editor, editor.langs, lang, editor.langs[lang].selectTemplatesNoData);\n\n        //TrumbowygSelectResourcesPlugin.onSearch = new EventEmitter();\n\n        editor.plugins.selectTemplates = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectTemplates = trumbowyg.o.plugins.selectTemplates || {};\n                trumbowyg.addBtnDef('selectTemplates', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectTemplatesPlugin.selectTemplatesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n\n\n        TrumbowygSelectTemplatesPlugin.templates.push({\n            id: 'tab-no-data',\n            label: editor.langs[lang].selectTemplatesNoData,\n            elements: []\n        });\n        TrumbowygSelectTemplatesPlugin.allTemplates['template-no-data'] =\n            '<div>' + editor.langs[lang].selectTemplatesNoData + '</div>';\n    }\n\n    private static selectTemplatesCb(params: any, t: any) {\n        var pfx: string = t.o.prefix;\n        //console.log('editorResources', editorResources);\n\n        var html: string[] = [];\n\n        html.push('<div class=\"modal-container templates-select\">');\n        html.push('<ul class=\"cbr2-tabs\" role=\"tablist\">');\n        TrumbowygSelectTemplatesPlugin.templates.forEach((templateSet, i) => {\n            html.push('<li role=\"' + templateSet.id + '\" class=\"cbr2-tabs-item ' + (i == 0 ? 'active' : '') + '\">');\n            html.push('   <a data-tab=\"' + templateSet.id + '\"  role=\"tab\" data-toggle=\"tab\">' + templateSet.label + '</a>');\n            html.push('</li>');\n        });\n\n        html.push('</ul>');\n        html.push('<div class=\"cbr-tab-content\">');\n\n\n        TrumbowygSelectTemplatesPlugin.templates.forEach((templateSet, i) => {\n            html.push('   <div role=\"tabpanel\" id=\"' + templateSet.id + '\" class=\"cbr-tab-pane ' + (i == 0 ? 'active' : '') + '\">');\n            html.push('   <ul class=\"templates-list template-gallery list-unstyled\">');\n            templateSet.elements.forEach((template: any, j: number) => {\n                template.icon = template.icon || DEFAULT_ICON;\n                html.push('   <li title=\"' + template.description + '\" class=\"item\"><label>' +\n                    '<img src=\"' + template.icon + '\" class=\"select-template-icon\"><input type=\"radio\" value=\"' + template.id + '\" name=\"template\">' +\n                    '<span class=\"title\"> ' + template.title + '</span>' +\n                    '<span class=\"description\"> ' + template.description + '</span>' +\n                    '</label></li>');\n            });\n            html.push('   </ul>');\n            html.push('   </div>');\n        });\n\n        html.push('</div>');\n        html.push('</div>');\n\n\n        //console.log('html', html);\n        var $modal = t.openModal(TrumbowygSelectTemplatesPlugin.editor.langs[TrumbowygSelectTemplatesPlugin.lang].selectTemplatesHeader, html.join(''))\n            .on('tbwconfirm', function () {\n                var selected = jQuery('input:checked', $modal);\n                var val = selected.val();\n                // console.log(val, allTemplates[val]);\n                // jQuery(this).off(pfx + 'confirm');\n\n                t.restoreRange();\n                t.syncCode();\n\n                if (val) {\n                    TrumbowygSelectTemplatesPlugin.editor.insertHtml(t, TrumbowygSelectTemplatesPlugin.allTemplates[val]);\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n        $modal.addClass('big');\n\n        jQuery('.cbr2-tabs a', $modal).off('click').on('click', function (e: any) {\n            e.preventDefault();\n\n            jQuery('.cbr2-tabs-item', $modal).removeClass('cbr-tabs-active');\n            jQuery(this).parent().addClass('cbr-tabs-active');\n\n            //    console.log('O_O', $(this).attr('data-tab'));\n            jQuery('.cbr-tab-content .cbr-tab-pane', $modal).removeClass('active');\n            jQuery('#' + jQuery(this).attr('data-tab')).addClass('active');\n        });\n        jQuery('.template-gallery li label', $modal).off('click').on('click', function (e: any) {\n            //console.log('O_O', e, $(this));\n            jQuery('.template-gallery li', $modal).removeClass('active');\n            jQuery(this).parent().addClass('active');\n        });\n    }\n\n    public static setTemplates(templates: any[], allTemplates: any) {\n        TrumbowygSelectTemplatesPlugin.templates = templates;\n        TrumbowygSelectTemplatesPlugin.allTemplates = allTemplates;\n    }\n}\n","import {\n    Directive,\n    Input,\n    forwardRef,\n    Output,\n    EventEmitter,\n    ElementRef,\n    OnInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges, Renderer2\n} from '@angular/core';\nimport {HttpHeaders, HttpClient} from '@angular/common/http';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS, FormControl} from '@angular/forms';\n\nimport 'rxjs/add/operator/toPromise';\n\nimport {TrumbowygTidyPlugin} from './tidy';\nimport {TrumbowygFontSizePlugin} from './font-size';\nimport {TrumbowygFontsPlugin} from './fonts';\nimport {TrumbowygSelectStylesPlugin} from './select-styles';\nimport {TrumbowygInsertLeadPlugin} from './insert-lead';\nimport {TrumbowygInsertMediaEmbedPlugin} from './insert-media-embed';\nimport {TrumbowygInsertTablePlugin} from './insert-table';\nimport {TrumbowygSelectImagesPlugin} from './select-images';\nimport {TrumbowygSelectResourcesPlugin} from './select-resources';\nimport {TrumbowygSelectTemplatesPlugin} from './select-templates';\n\nconst LEGACY_BOOTSTRAP_ID = 'legacy-bootstrap-styles';\n\ndeclare var jQuery: any;\n\n@Directive({\n    selector: '[trumbowyg-editor]',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => TrumbowygEditor),\n            multi: true\n        },\n        {\n            provide: NG_VALIDATORS,\n            useExisting: forwardRef(() => TrumbowygEditor),\n            multi: true\n        }\n    ]\n})\nexport class TrumbowygEditor implements ControlValueAccessor, OnInit, OnChanges, OnDestroy {\n    public static modes: any = {};\n    public static langs: any = {};\n    public static inited: boolean = false;\n    public static localImageRegexp: RegExp = /src\\=\\\"data\\:image\\/(.*)\\\"/gi;\n\n    @Input('has-auto-save') hasAutoSave: boolean = false;\n    @Input('auto-save-key') autoSaveKey: string = '';\n    @Input('last-update') lastUpdate: number = 0;\n    @Input() addBtns: any = [];\n    @Input() mode: string;\n    @Input() lang: string;\n    @Input() base64Image: any;\n\n    private _name: string;\n    private _value: string;\n\n    private _required: boolean = false;\n\n    @Output() base64ImageInserted: any = new EventEmitter();\n\n    public onInit: any = new EventEmitter();\n\n    private element: any;\n\n    private _autoSaveTimer: any = null;\n    private _autoSaved: any = null;\n\n    constructor(private el: ElementRef,\n                private render: Renderer2,\n                private http: HttpClient) {\n        this._required = this.el.nativeElement.hasAttribute('required');\n        this._name = this.el.nativeElement.getAttribute('name');\n        // console.log('el', this._name, this._required);\n    }\n\n    validate(c: FormControl) {\n        if (!this._required) {\n            return null;\n        }\n\n        if (c.value && c.value.length > 0) {\n            return null;\n        }\n\n        // console.log('TrumbowygEditor NG_VALIDATORS', this._name, c.value, 'invalid');\n\n        return {\n            required: true\n        };\n    }\n\n    propagateChange = (_: any) => {\n    };\n\n    registerOnChange(fn: any) {\n        this.propagateChange = fn;\n    }\n\n    registerOnTouched() {\n        // console.log('registerOnTouched');\n    }\n\n    onChange(value: any) {\n        // console.log('onChange', this._value, value);\n        this._value = value;\n\n        if (this.hasAutoSave) {\n            this._autoSave();\n        }\n    }\n\n    private _autoSave() {\n        clearTimeout(this._autoSaveTimer);\n        this._autoSaveTimer = setTimeout(() => {\n            this._saveToServer();\n        }, 500);\n    }\n\n    private _saveToServer() {\n        const headers = new HttpHeaders({\n            'Content-Type': 'application/json',\n            'If-Modified-Since': 'Mon, 26 Jul 1997 05:00:00 GMT',//no cache\n            'Cache-Control': 'no-cache',//no cache\n            'Pragma': 'no-cache'//no cache\n        });\n\n        this.http.post(TrumbowygTidyPlugin.editor.autoSaveUrl + '?action=auto-save', JSON.stringify({\n            key: this.autoSaveKey,\n            content: this._value\n        }), {\n            headers: headers\n        }).toPromise()\n            .then((res: any) => {\n                // console.log('_autoSave res', res.json());\n            });\n    }\n\n    private _checkAutoSave() {\n        this.http.get(TrumbowygTidyPlugin.editor.autoSaveUrl +\n            '?action=check-auto-save&key=' + this.autoSaveKey).toPromise()\n            .then((res: any) => {\n                this._autoSaved = res;\n                // console.log('_checkAutoSave res', this._autoSaved, this.lastUpdate);\n\n                if (this._autoSaved && parseInt(this._autoSaved.date, 10) > this.lastUpdate) {\n                    this._buildAutoSaveToolbar();\n                    // console.log('_hasAutoSave');\n                }\n            });\n    }\n\n    private _buildAutoSaveToolbar() {\n        this.element.data('trumbowyg').$box.append('<div class=\"trumbowyg-auto-save\">' +\n            '<span class=\"title\">' + TrumbowygEditor.langs[this.lang].hasAutoSavedMsg + '</span>' +\n            '<span class=\"buttons\">' +\n            '<button type=\"button\" class=\"button-sm-default\">' + TrumbowygEditor.langs[this.lang].autoSaveCancel + '</button>' +\n            '<button type=\"button\" class=\"button-sm-success\">' + TrumbowygEditor.langs[this.lang].autoSaveRestore + '</button>' +\n            '</span>' +\n            '</div>');\n\n        setTimeout(() => {\n            jQuery('.trumbowyg-auto-save .button-sm-default', this.element.data('trumbowyg').$box)\n                .on('click', (e: any) => {\n                    // console.log('cancel');\n                    e.target.innerHTML = '...';\n                    this.clearAutoSaved();\n                });\n\n            jQuery('.trumbowyg-auto-save .button-sm-success', this.element.data('trumbowyg').$box)\n                .on('click', (e: any) => {\n                    // console.log('restore');\n                    e.target.innerHTML = '...';\n                    this.restoreAutoSave();\n                    jQuery('.trumbowyg-auto-save').hide();\n                });\n        }, 200);\n    }\n\n    public clearAutoSaved() {\n        this.http.get(TrumbowygTidyPlugin.editor.autoSaveUrl +\n            '?action=clear-auto-save&key=' + this.autoSaveKey).toPromise()\n            .then((res: any) => {\n                // console.log('_checkAutoSave res', res.json());\n                this._autoSaved = null;\n                jQuery('.trumbowyg-auto-save').hide();\n            });\n    }\n\n    public restoreAutoSave() {\n        if (this._autoSaved) {\n            this._value = this._autoSaved.content;\n            this.element.trumbowyg('html', this._value);\n            this.propagateChange(this._value);\n            this.lastUpdate = parseInt(this._autoSaved.date, 10);\n        }\n    }\n\n    writeValue(value: any) {\n        // console.log('writeValue', this._name, value);\n\n        if (value != null) {\n            this._value = value;\n\n            // if (this._value.length == 0 && (/webkit/i).test(navigator.userAgent)) {\n            //     this.element.trumbowyg('html', '<p></p>');\n            // } else {\n            this.element.trumbowyg('html', this._value);\n            // }\n        }\n    }\n\n    private init(lang: string) {\n        TrumbowygEditor.inited = true;\n// console.log('init', lang);\n// console.log('TrumbowygEditor.langs', TrumbowygEditor.langs);\n        if (TrumbowygEditor.langs) {\n            jQuery.trumbowyg.langs = TrumbowygEditor.langs;\n        }\n\n        jQuery.trumbowyg.svgPath = (<any>window).TrumbowygEditorSvgPath || '/bower_components/trumbowyg/dist/ui/icons.svg';\n        jQuery.trumbowyg.tidyUrl = '/api/rest.php/trumbowyg?action=tidy';\n        jQuery.trumbowyg.autoSaveUrl = '/api/rest.php/trumbowyg';\n\n        jQuery.trumbowyg.insertHtml = function (t: any, html: string) {\n            try {\n                try {\n                    // <= IE10\n                    t.doc.selection.createRange().pasteHTML(html);\n                } catch (err) {\n                    // IE 11\n                    var el = document.createElement(\"div\");\n                    el.innerHTML = html;\n                    var frag: any = document.createDocumentFragment(),\n                        node: any,\n                        lastNode: any;\n                    while ((node = el.firstChild)) {\n                        lastNode = frag.appendChild(node);\n                    }\n                    var range = t.doc.getSelection().getRangeAt(0);\n                    range.deleteContents();\n                    range.insertNode(frag);\n                }\n            } catch (err) {\n                // Not IE\n                t.execCmd('insertHTML', html);\n            }\n            t.syncCode();\n            t.$c.trigger('tbwchange');\n        }\n\n        var btnsGrps = {\n            design: ['bold', 'italic', 'underline', 'strikethrough'],\n            semantic: ['strong', 'em', 'del'],\n            justify: ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            lists: ['unorderedList', 'orderedList']\n        };\n\n        TrumbowygTidyPlugin.init(jQuery.trumbowyg, lang, this.http);\n        TrumbowygFontSizePlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygFontsPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertLeadPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectStylesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertTablePlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertMediaEmbedPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectImagesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectResourcesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectTemplatesPlugin.init(jQuery.trumbowyg, lang);\n\n        //console.trace();\n        //console.log('init', jQuery.trumbowyg);\n\n\n        TrumbowygEditor.modes = {\n            inline: [\n                'removeformat',\n                '|',\n                btnsGrps.design, '|',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                'insertMediaEmbed',\n                'selectImage'\n            ],\n            simple: [\n                'removeformat',\n                '|',\n                btnsGrps.design, '|',\n                'fontName',\n                'fontSize',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            noImage: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            extend: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'selectTemplates',\n                'insertTable',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            full: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                'selectStyles',\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'selectResources',\n                'selectTemplates',\n                'insertTable',\n                'horizontalRule',\n                'fullscreen'\n            ]\n        };\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.base64Image) {\n            //console.log('ngOnChanges base64Image', this.base64Image);\n            var el = jQuery('<div>' + this.element.trumbowyg('html') + '</div>');\n            el.find('#' + this.base64Image.uid).attr('src', this.base64Image.file);\n            this.base64Image = null;\n            this.element.trumbowyg('html', el.html());\n        }\n    }\n\n    private detectBase64Insert(html: string) {\n        //console.log('detectBase64Insert', html);\n        if (TrumbowygEditor.localImageRegexp.test(html)) {\n            var images: any[] = [];\n\n            var el = jQuery('<div>' + html + '</div>');\n            var uid: string;\n            el.find('img[src^=\"data:image\"]').each(function () {\n                if (!jQuery(this).attr('id')) {\n                    uid = Math.random().toString(36).substring(2, 9);\n                    jQuery(this).attr('id', uid);\n                    images.push({\n                        uid: uid,\n                        src: this.src\n                    });\n                }\n            });\n            this.element.trumbowyg('html', el.html());\n            //console.log('images', images);\n            images.forEach(image => {\n                this.base64ImageInserted.emit(image);\n            });\n            return true;\n        }\n        return false;\n    }\n\n    ngOnInit() {\n        //console.log('TrumbowygEditor ngOnInit');\n        //console.log('TrumbowygEditor langs', TrumbowygEditor.langs);\n        this.lang = this.lang || 'en';\n\n        this.init(this.lang);\n        this.onInit.emit();\n\n        this.mode = this.mode || 'simple';\n        this.element = jQuery(this.el.nativeElement);\n\n        var tmpBtns = TrumbowygEditor.modes[this.mode];\n        this.addBtns = this.addBtns || null;\n\n        let addElement = 0;\n        if (this.mode == 'extend' || this.mode == 'full') {\n            if (!document.getElementById(LEGACY_BOOTSTRAP_ID)) {\n                let linkContainer = document.createElement(\"LINK\");\n                this.render.setAttribute(linkContainer, 'id', LEGACY_BOOTSTRAP_ID);\n                this.render.setAttribute(linkContainer, 'rel', 'stylesheet');\n                this.render.setAttribute(linkContainer, 'href', '/node_modules/ng2-trumbowyg/assets/modified-bootstrap.css');\n                document.body.appendChild(linkContainer);\n            }\n        }\n        if (this.addBtns && this.mode == 'extend') {\n            console.log('TrumbowygEditor addBtns', this.addBtns);\n            this.addBtns.forEach((value: any) => {\n                if (value == 'selectStyles') {\n                    let elemIndex = TrumbowygEditor.modes['full'].indexOf(value);\n                    tmpBtns.splice(elemIndex, 0, value);\n                    addElement++;\n                }\n\n                if (value == 'selectResources') {\n                    let elemIndex = TrumbowygEditor.modes['full'].indexOf(value);\n                    let countPreviousElements = 1;\n                    tmpBtns.splice(elemIndex - countPreviousElements + addElement, 0, value);\n                }\n            });\n        }\n\n        this.element.trumbowyg('destroy');\n        this.element.trumbowyg({\n            btns: tmpBtns,\n            lang: this.lang,\n            mobile: true,\n            semantic: false,\n            autogrow: this.mode == 'inline',\n            tablet: true\n        })\n            .on('tbwpaste', () => {\n                var html: string = this.element.trumbowyg('html');\n                //console.log('tbwpaste', html);\n                if (!this.detectBase64Insert(html)) {\n                    this.propagateChange(html);\n                    this.onChange(html);\n                }\n                //console.log('tbwpaste', html);\n                //console.log('self.ngModelChange', self.ngModelChange);\n            })\n            .on('tbwchange', () => {\n                var html: string = this.element.trumbowyg('html');\n                //console.log('tbwchange', html);\n                if (!this.detectBase64Insert(html)) {\n                    this.propagateChange(html);\n                    this.onChange(html);\n                }\n                //console.log('tbwchange', html);\n                //console.log('self.ngModelChange', self.ngModelChange);\n            })\n            .on('tbwinit', (e: any) => {\n                let t: any = this.element.data('trumbowyg');\n                // console.log('tbwinit', e, t, this.element);\n                if (t) {\n                    t.$box.addClass('trumbowyg-' + this.mode);\n                    t.$ed.addClass('page-container');\n                    t.$ed.addClass('legacy-bootstrap');\n                    // console.log('tbwinit', e, t, t.$ed, t.$box);\n                    if (t.$box.width() >= 1200) {\n                        t.$ed.addClass('bordered');\n                    }\n                }\n            });\n\n        setTimeout(() => {\n            // console.log('hasAutoSave', this.hasAutoSave);\n            if (this.hasAutoSave) {\n                this._checkAutoSave();\n            }\n        }, 500);\n    }\n\n    ngOnDestroy() {\n        this.element.trumbowyg('destroy');\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {HttpClientModule} from '@angular/common/http';\n\nimport {TrumbowygEditor} from './editor';\n\n@NgModule({\n    imports: [\n        HttpClientModule\n    ],\n    declarations: [\n        TrumbowygEditor\n    ],\n    exports: [\n        TrumbowygEditor\n    ]\n})\nexport class TrumbowygEditorModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}