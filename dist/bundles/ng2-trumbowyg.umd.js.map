{"version":3,"file":"ng2-trumbowyg.umd.js","sources":["../../src/tidy.ts","../../src/font-size.ts","../../src/fonts.ts","../../src/select-styles.ts","../../src/insert-lead.ts","../../src/insert-media-embed.ts","../../src/insert-table.ts","../../src/select-images.ts","../../src/select-resources.ts","../../src/select-templates.ts","../../src/editor.ts","../../src/module.ts","../../src/ng2-trumbowyg.ts"],"sourcesContent":["import {HttpClient} from '@angular/common/http';\nimport 'rxjs/add/operator/toPromise';\n\nexport class TrumbowygTidyPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string, http: HttpClient) {\n        TrumbowygTidyPlugin.editor = editor;\n\n        editor.plugins.tidy = {\n            init: (t: any) => {\n                // console.log('TrumbowygCodemirrorPlugin');\n\n                t.toggle = () => {\n                    var prefix = t.o.prefix;\n                    t.semanticCode(false, true);\n                    setTimeout(function () {\n                        t.doc.activeElement.blur();\n                        t.$box.toggleClass(prefix + 'editor-hidden ' + prefix + 'editor-visible');\n                        t.$btnPane.toggleClass(prefix + 'disable');\n                        t.$btnPane.find('.' + prefix + 'viewHTML-button').toggleClass(prefix + 'active');\n                        if (t.$box.hasClass(prefix + 'editor-visible')) {\n                            t.$ta.attr('tabindex', -1);\n                        } else {\n                            if (TrumbowygTidyPlugin.editor.tidyUrl) {\n                                // console.log(t.$ed.html());\n                                http.post(\n                                    TrumbowygTidyPlugin.editor.tidyUrl,\n                                    t.$ed.html(), {\n                                        responseType: 'text'\n                                    })\n                                    .toPromise()\n                                    .then((res: any) => {\n                                        // console.log('tidy res', res.text());\n                                        t.$ta.val(res);\n                                    });\n                            }\n                            t.$ta.removeAttr('tabindex');\n                        }\n                    }, 0);\n                };\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygFontSizePlugin {\n    public static editor: any;\n    public static fontSizes: string[] = [];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygFontSizePlugin.editor = editor;\n\n        TrumbowygFontSizePlugin.fontSizes = [];\n\n        var i = 1;\n        for (; i <= 7; i++) {\n            //jQuery.trumbowyg.opts.fontSize.push($filter('translate')(\"Размер\") + ' ' + i);\n            TrumbowygFontSizePlugin.fontSizes.push(editor.langs[lang]['fontSize' + i]);\n        }\n\n        // Add all fonts in two dropdowns\n        editor.plugins.fontSize = {\n            init: (trumbowyg: any) => {\n                // console.log('fontSize init');\n                // trumbowyg.o.plugins.fontSize = trumbowyg.o.plugins.fontSize || {};\n                trumbowyg.addBtnDef('fontSize', {\n                    dropdown: TrumbowygFontSizePlugin.buildDropdown('fontSize', trumbowyg)\n                });\n            }\n        }\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        TrumbowygFontSizePlugin.fontSizes.forEach((size: string, i: number) => {\n            var btn = func + '_' + i;\n            trumbowyg.addBtnDef(btn, {\n                fn: (param: any, t: any) => {\n                    //console.info(param, t);\n                    document.execCommand('fontSize', false, param);\n                    t.syncCode();\n                },\n                text: size,\n                param: i + 1\n            });\n            dropdown.push(btn);\n        });\n\n\n        return dropdown;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygFontsPlugin {\n    public static editor: any;\n    public static fonts: string[];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygFontsPlugin.editor = editor;\n\n        // Set default fonts\n        TrumbowygFontsPlugin.fonts = [\n            \"Arial\",\n            \"Courier\",\n            \"Courier New\",\n            \"Georgia\",\n            \"Helvetica\",\n            \"Impact\",\n            \"Monospace\",\n            \"Sans-serif\",\n            \"Serif\",\n            \"Tahoma\",\n            \"Times New Roman\",\n            \"Trebuchet MS\",\n            \"Verdana\"\n        ];\n\n        // Add all fonts in two dropdowns\n        editor.plugins.fontName = {\n            init: function (trumbowyg: any) {\n                // console.log('fontName trumbowyg', trumbowyg);\n                trumbowyg.o.plugins.fontName = trumbowyg.o.plugins.fontName || {};\n                trumbowyg.addBtnDef('fontName', {\n                    dropdown: TrumbowygFontsPlugin.buildDropdown('fontName', trumbowyg)\n                });\n            }\n        }\n\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        TrumbowygFontsPlugin.fonts.forEach((font: string, i: number) => {\n            // console.info('TrumbowygFontsPlugin', font, i);\n            var fontAlias = font.toLowerCase().replace(' ', '').replace('-', '');\n            var btn = func + '_' + fontAlias;\n            trumbowyg.addBtnDef(btn, {\n                fn: function (param: any, t: any) {\n                    // console.info(param, t);\n                    document.execCommand('fontName', false, param);\n                    t.syncCode();\n                },\n                text: font,\n                param: font\n            });\n            dropdown.push(btn);\n        });\n\n\n        return dropdown;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygSelectStylesPlugin {\n    public static allStyles: any[] = [];\n\n    public static editor: any;\n    public static lang: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectStylesPlugin.editor = editor;\n        TrumbowygSelectStylesPlugin.lang = lang;\n        editor.plugins.selectStyles = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectStyles = trumbowyg.o.plugins.selectStyles || {};\n\n                trumbowyg.addBtnDef('selectStyles', {\n                    fn: function (params: any) {\n                        TrumbowygSelectStylesPlugin.selectStylesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static selectStylesCb(params: any, t: any) {\n\n        var pfx = t.o.prefix;\n        var html: string[] = [];\n\n        html.push('<div class=\"modal-container styles-select\">');\n        html.push('   <ul class=\"styles-list template-gallery list-unstyled\">');\n        TrumbowygSelectStylesPlugin.allStyles.forEach((style : any) => {\n            html.push('   <li title=\"' + style.description + '\" class=\"item style\"><label>' +\n                '<img src=\"' + style.icon + '\" class=\"select-template-icon\"><input type=\"radio\" value=\"' + style.id + '\" name=\"template\">' +\n                '<span class=\"title\"> ' + style.title + '</span>' +\n                '</label></li>');\n        });\n        html.push('   </ul>');\n        html.push('</div>');\n\n        var selectedImageIndex: number = null;\n        var $modal = t.openModal(TrumbowygSelectStylesPlugin.editor.langs[TrumbowygSelectStylesPlugin.lang].selectTemplatesStyle, html.join(''))\n            .on('tbwconfirm', function () {\n                var selected = jQuery('input:checked', $modal);\n\n                if (selected.length > 0) {\n                    var styleId = parseInt(selected.val(), 10);\n                   // console.log('styleId', styleId);\n                    var editor = $modal.parent().find('.trumbowyg-editor');\n                    editor.find('.customStyle').remove();\n                    editor.append('<style class=\"customStyle\">@import url(https://ets.davintoo.com/uploads/css/' + styleId + '.css);</style>');\n                    t.syncTextarea();\n                    t.$c.trigger('tbwchange');\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        $modal.addClass('big');\n\n        jQuery('.styles-list li label', $modal).off('click').on('click', function (e:any) {\n            jQuery('.styles-list li', $modal).removeClass('active');\n            jQuery(this).parent().addClass('active');\n        });\n\n    };\n\n    public static setStyles(allStyles: any[]) {\n        TrumbowygSelectStylesPlugin.allStyles = allStyles;\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertLeadPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertLeadPlugin.editor = editor;\n\n        editor.plugins.lead = {\n            init: (trumbowyg: any) => {\n                // console.log('lead addBtnDef');\n\n                trumbowyg.addBtnDef('lead', {\n                    fn: () => {\n                        var documentSelection = trumbowyg.doc.getSelection();\n\n                        if (documentSelection.rangeCount) {\n                            var range = documentSelection.getRangeAt(0).cloneRange();\n                            range.surroundContents(jQuery('<p class=\"lead\"/>').get(0));\n                            documentSelection.removeAllRanges();\n                            documentSelection.addRange(range);\n                        }\n\n                        trumbowyg.syncCode();\n\n                        trumbowyg.updateButtonPaneStatus();\n                        trumbowyg.$c.trigger('tbwchange');\n                    }\n                });\n\n                trumbowyg.btnsDef.formatting.dropdown = ['p', 'blockquote', 'lead', 'h1', 'h2', 'h3', 'h4'];\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertMediaEmbedPlugin {\n    public static editor: any;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertMediaEmbedPlugin.editor = editor;\n\n        editor.plugins.insertMediaEmbed = {\n            init: (trumbowyg: any) => {\n                trumbowyg.o.plugins.insertMediaEmbed = trumbowyg.o.plugins.insertMediaEmbed || {};\n                trumbowyg.addBtnDef('insertMediaEmbed', {\n                    fn: (params: any, t: any) => {\n                        //console.log('insertMediaEmbed');\n                        var t = trumbowyg;\n\n                        var html: string[] = [];\n                        html.push('<div class=\"modal-container\">');\n                        html.push('<div class=\"modal-meadia-embed\">');\n                        html.push('<textarea></textarea>');\n                        html.push('</div>');\n                        html.push('</div>');\n\n                        console.log('insertMediaEmbed');\n\n                        var $modal = t.openModal('Embed Code', html.join(''))\n                            .on('tbwconfirm', () => {\n                                t.restoreRange();\n                                t.syncCode();\n\n                                var code = jQuery('textarea', $modal).val();\n                                if (code) {\n                                    TrumbowygInsertMediaEmbedPlugin.editor.insertHtml(t, code);\n                                }\n\n                                setTimeout(() => {\n                                    t.closeModal();\n                                }, 250);\n                            })\n                            .on('tbwcancel', () => {\n                                t.restoreRange();\n                                t.closeModal();\n                            });\n                    }\n                });\n            }\n        }\n    }\n}\n","declare var jQuery: any;\n\nexport class TrumbowygInsertTablePlugin {\n    public static editor: any;\n\n    public static elementsCache: any = {};\n\n    public static init(editor: any, lang: string) {\n        TrumbowygInsertTablePlugin.editor = editor;\n\n        editor.plugins.insertTable = {\n            init: function (trumbowyg: any) {\n                // console.log('trumbowyg', trumbowyg);\n                trumbowyg.o.plugins.insertTable = trumbowyg.o.plugins.insertTable || {};\n                trumbowyg.addBtnDef('insertTable', {\n                    dropdown: TrumbowygInsertTablePlugin.buildDropdown('insertTable', trumbowyg),\n                    tag: 'table'\n                });\n\n                setTimeout(function () {\n                    var i: number = 1;\n                    var j: number = 1;\n                    for (; i <= 10; i++) {\n                        for (j = 1; j <= 10; j++) {\n                            TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j] = trumbowyg.$box.find('.trumbowyg-insertTable_r' + i + '_c' + j + '_insertTable-dropdown-button');\n                        }\n                    }\n\n                    trumbowyg.$box.find('.trumbowyg-insertTable-button')\n                        .off('click')\n                        .on('click', function () {\n                            jQuery('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button').removeClass('active');\n                        });\n\n                    trumbowyg.$box.find('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button')\n                        .off('mouseenter mouseleave')\n                        // .on('hover', (e: any) => {\n                        .hover((e: any) => {\n                            //console.log(e.target.classList);\n                            //$(e.target).attr('class').split('_')\n                            var tmp = jQuery(e.target).attr('class').split('_');\n                            var r = parseInt(tmp[1].replace('r', ''), 10);\n                            var c = parseInt(tmp[2].replace('c', ''), 10);\n                            // console.log('i', tmp, r, c);\n                            TrumbowygInsertTablePlugin.fillCells(r, c);\n\n                            //console.log($(e.target).attr('class').split('_'));\n                        }, (e: any) => {\n                            // console.log(e);\n\n                            var tmp = jQuery(e.target).attr('class').split('_');\n                            var r = parseInt(tmp[1].replace('r', ''), 10);\n                            var c = parseInt(tmp[2].replace('c', ''), 10);\n                            // console.log('o', tmp, r, c);\n                            TrumbowygInsertTablePlugin.fillCells(r, c);\n                        });\n                }, 1000);\n            },\n            //tagHandler: colorTagHandler\n        }\n    }\n\n    private static buildTable(r: number, c: number) {\n        var html: string[] = [];\n        html.push('<table border=\"1\" width=\"100%\">');\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= r; i++) {\n            html.push('<tr>');\n            for (j = 1; j <= c; j++) {\n                html.push('<td>&nbsp;</td>');\n            }\n            html.push('</tr>');\n        }\n        html.push('</table>');\n        return html;\n    }\n\n    private static fillCells(r: number, c: number) {\n        jQuery('.trumbowyg-dropdown-insertTable.trumbowyg-dropdown button').removeClass('active');\n\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= r; i++) {\n            for (j = 1; j <= c; j++) {\n                // console.log(TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j]);\n                TrumbowygInsertTablePlugin.elementsCache['r' + i + '_c' + j].addClass('active');\n            }\n        }\n    }\n\n    private static buildDropdown(func: any, trumbowyg: any) {\n        var dropdown: string[] = [];\n\n        var i: number = 1;\n        var j: number = 1;\n        for (; i <= 10; i++) {\n            for (j = 1; j <= 10; j++) {\n                var btn: string = 'insertTable_r' + i + '_c' + j + '_' + func;\n                // trumbowyg.addBtnDef()\n                // console.log('trumbowyg', trumbowyg);\n                trumbowyg.addBtnDef(btn, {\n                    forceCss: true,\n                    fn: function (params: any) {\n                        var html = TrumbowygInsertTablePlugin.buildTable(params.r, params.c).join('');\n                        // console.info('HTML', params, t, buildTable(params.r, params.c).join(''), html);\n\n                        trumbowyg.restoreRange();\n                        trumbowyg.syncCode();\n\n                        TrumbowygInsertTablePlugin.editor.insertHtml(trumbowyg, html);\n                    },\n                    text: ' ',\n                    param: {\n                        r: i,\n                        c: j\n                    }\n                });\n                dropdown.push(btn);\n            }\n        }\n\n        return dropdown;\n    }\n}\n","import {Directive, Input, Output, EventEmitter, ElementRef, OnInit, OnChanges}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nexport class TrumbowygSelectImagesPlugin {\n    public static editorImages: any[] = [];\n\n    public static editor: any;\n    public static lang: string;\n    public static imagesExtensions: string[] = ['jpg', 'png', 'jpeg', 'bmp', 'gif', 'svg'];\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectImagesPlugin.editor = editor;\n        TrumbowygSelectImagesPlugin.lang = lang;\n\n        // console.log('TrumbowygSelectImagesPlugin init', editor);\n\n        editor.plugins.selectImage = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectImage = trumbowyg.o.plugins.selectImage || {};\n                // console.log('selectImage trumbowyg', trumbowyg);\n                trumbowyg.addBtnDef('selectImage', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectImagesPlugin.selectImageCb(params, trumbowyg, TrumbowygSelectImagesPlugin.editorImages);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static selectImageCb(params: any, t: any, editorImages: any[]) {\n        var pfx: string = t.o.prefix;\n        var i: number = 0,\n            l: number = editorImages.length;\n        if (l == 0) {\n            return;\n        }\n\n        var html: string[] = [];\n        var file: any = null;\n        html.push('<div class=\"modal-container\">');\n        html.push('<ul class=\"' + pfx + 'select-images gallery\">');\n        for (; i < l; i++) {\n            html.push('<li class=\"item\" data-i=\"' + i + '\"><label>' +\n                '<img width=\"50px\" src=\"' + editorImages[i].url + '\"/>' + //editorImages[i].name +\n                '</label></li>'\n            );\n        }\n        html.push('</ul>');\n        html.push('</div>');\n\n        var selectedImageIndex: number = null;\n        var $modal = t.openModal(TrumbowygSelectImagesPlugin.editor.langs[TrumbowygSelectImagesPlugin.lang].attachedImages, html.join(''))\n            .on('tbwconfirm', function () {\n                t.restoreRange();\n                t.syncCode();\n\n                if (selectedImageIndex != null) {\n                    var width = editorImages[selectedImageIndex].width || 1024;\n                    t.execCmd('insertImage', editorImages[selectedImageIndex].url);\n                    if (width > 1024) {\n                        jQuery('img[src=\"' + editorImages[selectedImageIndex].url + '\"]:not([alt])', t.$box).attr('width', '1024px');\n                    }\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        jQuery('li.item', $modal).on('click', function () {\n            jQuery('li', $modal).removeClass('active');\n            jQuery(this).addClass('active');\n            selectedImageIndex = jQuery(this).data('i');\n        });\n    };\n\n    public static updateImages(files: any[]) {\n        TrumbowygSelectImagesPlugin.editorImages = [];\n        files.forEach((img: any) => {\n            img.extension = img.extension || img.url.split('.').pop();\n            if (TrumbowygSelectImagesPlugin.imagesExtensions.indexOf(img.extension) != -1) {\n                // if (img.url.substring(0, 8) != '/uploads') {\n                    // img.url = '/uploads' + img.url;\n                // }\n                if (!img.width) {\n                    var imgObj = new Image();\n                    imgObj.setAttribute('data-i', TrumbowygSelectImagesPlugin.editorImages.length + '');\n                    imgObj.onload = function (e) {\n                        if (e.type !== 'error' && (<any>this).width) {\n                            var indx = parseInt((<any>this).getAttribute('data-i'));\n                            TrumbowygSelectImagesPlugin.editorImages[indx].width = (<any>this).width;\n                        }\n                    }\n                    imgObj.src = img.url;\n                    img.width = 1024;\n                }\n                TrumbowygSelectImagesPlugin.editorImages.push(img);\n            }\n        });\n    }\n}\n","import {EventEmitter}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nexport class TrumbowygSelectResourcesPlugin {\n    public static editorResources: any[] = [];\n\n    public static onSearch: EventEmitter<any> = new EventEmitter();\n\n    public static editor: any;\n    public static $modal: any;\n    public static lang: string;\n    public static pfx: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectResourcesPlugin.editor = editor;\n        TrumbowygSelectResourcesPlugin.lang = lang;\n        // TrumbowygSelectResourcesPlugin.onSearch = new EventEmitter();\n\n        editor.plugins.selectResources = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectResources = trumbowyg.o.plugins.selectResources || {};\n                trumbowyg.addBtnDef('selectResources', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectResourcesPlugin.selectResourcesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n    }\n\n    private static translate(str: string) {\n        return TrumbowygSelectResourcesPlugin.editor.langs[TrumbowygSelectResourcesPlugin.lang][str]\n    }\n\n    private static renderList(pfx: string, html: string[], items: any[]) {\n        items.forEach((resource: any) => {\n            // console.log('resource', resource);\n            html.push('<li class=\"item\">');\n            html.push('<label>');\n            html.push('<input type=\"radio\" name=\"r' + pfx + '\" data-id=\"' + resource.id + '\" ' +\n                'title=\"' + resource.title + '\" data-type=\"' + resource.display_type + '\" value=\"' + resource.id + '\"/>');\n            html.push('<strong>' + resource.title + '</strong>');\n            if (resource.description && resource.description.length > 0) {\n                html.push('<br/><i>' + resource.description + '</i>');\n            }\n            html.push('</label>');\n            html.push('</li>');\n        });\n    }\n\n\n    private static selectResourcesCb(params: any, t: any) {\n        var pfx = TrumbowygSelectResourcesPlugin.pfx = t.o.prefix;\n        //console.log('editorResources', editorResources);\n\n        var html: string[] = [];\n\n        html.push('<div class=\"resources-select modal-container\">');\n        html.push('<div class=\"resources-search cbr-input-control\">');\n        html.push('<label for=\"text\" class=\"cbr-label\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesSearch') +'</label>');\n        html.push('<input class=\"cbr-input cbr-input-default cbr-input-email\" type=\"text\">');\n        html.push('<span class=\"cbr-icon-input cbr-icon-input-primary\">');\n        html.push('<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"');\n        html.push('width=\"20\" height=\"20\" viewBox=\"0 0 451 451\" style=\"enable-background:new 0 0 451 451;\" xml:space=\"preserve\">');\n        html.push('<g>');\n        html.push('<path d=\"M447.05,428l-109.6-109.6c29.4-33.8,47.2-77.9,47.2-126.1C384.65,86.2,298.35,0,192.35,0C86.25,0,0.05,86.3,0.05,192.3');\n        html.push('s86.3,192.3,192.3,192.3c48.2,0,92.3-17.8,126.1-47.2L428.05,447c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4');\n        html.push('C452.25,441.8,452.25,433.2,447.05,428z M26.95,192.3c0-91.2,74.2-165.3,165.3-165.3c91.2,0,165.3,74.2,165.3,165.3');\n        html.push('s-74.1,165.4-165.3,165.4C101.15,357.7,26.95,283.5,26.95,192.3z\"/>');\n        html.push('</g>');\n        html.push('</svg>');\n        html.push('</span>');\n        html.push('</div>');\n        html.push('<ul class=\"cbr2-tabs\" role=\"tablist\">');\n        html.push('<li role=\"all\" class=\"cbr2-tabs-itemactive\">');\n        html.push('   <a data-type=\"all\"  role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesAll') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"gallery\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"gallery\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesGallery') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"html\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"html\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesHtmlSite') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"video\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"video\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesVideo') + '</a>');\n        html.push('</li>');\n        html.push('<li role=\"audio\" class=\"cbr2-tabs-item\">');\n        html.push('   <a data-type=\"audio\" role=\"tab\">' + TrumbowygSelectResourcesPlugin.translate('selectResourcesAudio') + '</a>');\n        html.push('</li>');\n        html.push('</ul>');\n        html.push('<div class=\"cbr-tab-content\">');\n        html.push('   <div role=\"tabpanel\" class=\"cbr-tab-pane active\">');\n        html.push('   <ul class=\"resources-list list-unstyled\">');\n        TrumbowygSelectResourcesPlugin.renderList(pfx, html, TrumbowygSelectResourcesPlugin.editorResources);\n        html.push('   </ul>');\n        html.push('</div>');\n        html.push('</div>');\n\n        html.push('</div>');\n\n        //console.log('html', html);\n        var $modal = TrumbowygSelectResourcesPlugin.$modal = t.openModal(TrumbowygSelectResourcesPlugin.translate('selectResourcesHeader'), html.join(''))\n            .on('tbwconfirm', function () {\n\n                var selected = jQuery('input:checked', $modal);\n                console.log('selected', selected);\n\n                var val = selected.val();\n                //var i = parseInt(selected.data('i'), 10);\n                var type = selected.data('type');\n\n                t.restoreRange();\n                t.syncCode();\n\n                if (val) {\n                    if (type === 'mp4') {\n                        type = 'video';\n                    }\n                    if (type === 'mp3' || type === 'acc') {\n                        type = 'audio';\n                    }\n\n                    switch (type) {\n                        case 'gallery':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"gallery\" data-ext=\"' + type + '\" data-gallery-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-gallery.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"640px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-gallery/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                        case 'video':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"video\" data-ext=\"' + type + '\" data-video-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-video.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"480px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-video-player/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                        case 'audio':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"audio\" data-ext=\"' + type + '\" data-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-audio.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"65px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-audio-player/dist/index.html?id=' + val + '\" data-item-id=\"' + val + '\" scrolling=\"no\" marginheight=\"0\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n\n                            break;\n                        case 'html':\n                            // TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<img resource-in-resource-render ' +\n                            //     'data-item-id=\"' + val + '\" data-type=\"html\" data-ext=\"' + type + '\" data-src=\"' + val + '\"' +\n                            //     'src=\"/themes/default/assets/img/inline-resource.png\" />');\n                            TrumbowygSelectResourcesPlugin.editor.insertHtml(t, '<iframe resource-in-resource-iframe=\"\" allowfullscreen width=\"100%\" height=\"640px\" frameborder=\"0\" ' +\n                                'src=\"/node_modules/collaborator-html-player/dist/index.html?id=' + val + '\" scrolling=\"no\" marginheight=\"0\" data-item-id=\"' + val + '\" ' +\n                                'class=\"no-border embed-responsive-item\"></iframe>');\n                            break;\n                    }\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n\n        jQuery('.cbr2-tabs a', $modal).off('click').on('click', function (e: any) {\n            e.preventDefault();\n\n            jQuery('.cbr2-tabs-item', $modal).removeClass('cbr-tabs-active');\n            jQuery(this).parent().addClass('cbr-tabs-active');\n\n            TrumbowygSelectResourcesPlugin.onSearch.emit({\n                type: jQuery(this).attr('data-type') || 'all',\n                title: jQuery('.cbr-input', $modal).val()\n            });\n        });\n\n        jQuery('.cbr-icon-input', $modal).off('click').on('click', function () {\n            TrumbowygSelectResourcesPlugin.onSearch.emit({\n                type: jQuery(this).attr('data-type') || 'all',\n                title: jQuery('.cbr-input', $modal).val()\n            });\n        });\n    }\n\n    public static updateResources(editorResources: any[]) {\n        TrumbowygSelectResourcesPlugin.editorResources = editorResources;\n        //\n        jQuery('.resources-list', TrumbowygSelectResourcesPlugin.$modal).empty();\n        var lhtml: string[] = [];\n        TrumbowygSelectResourcesPlugin.renderList(TrumbowygSelectResourcesPlugin.pfx, lhtml, editorResources);\n        jQuery('.resources-list', TrumbowygSelectResourcesPlugin.$modal).append(lhtml.join(''));\n    }\n}\n","// import {EventEmitter}         from '@angular/core';\n\ndeclare var jQuery: any;\n\nconst DEFAULT_ICON = 'themes/default/assets/img/t-icon.png';\n\nexport class TrumbowygSelectTemplatesPlugin {\n    public static templates: any[] = [];\n    public static allTemplates: any = {};\n\n    public static editor: any;\n    public static lang: string;\n\n    public static init(editor: any, lang: string) {\n        TrumbowygSelectTemplatesPlugin.editor = editor;\n        TrumbowygSelectTemplatesPlugin.lang = lang;\n\n        //console.log('init', editor, editor.langs, lang, editor.langs[lang].selectTemplatesNoData);\n\n        //TrumbowygSelectResourcesPlugin.onSearch = new EventEmitter();\n\n        editor.plugins.selectTemplates = {\n            init: function (trumbowyg: any) {\n                trumbowyg.o.plugins.selectTemplates = trumbowyg.o.plugins.selectTemplates || {};\n                trumbowyg.addBtnDef('selectTemplates', {\n                    fn: function (params: any) {\n                        // console.log('selectImageCb', params, trumbowyg, editorImages);\n                        TrumbowygSelectTemplatesPlugin.selectTemplatesCb(params, trumbowyg);\n                    }\n                });\n            },\n            tag: 'img'\n        }\n\n\n        TrumbowygSelectTemplatesPlugin.templates.push({\n            id: 'tab-no-data',\n            label: editor.langs[lang].selectTemplatesNoData,\n            elements: []\n        });\n        TrumbowygSelectTemplatesPlugin.allTemplates['template-no-data'] =\n            '<div>' + editor.langs[lang].selectTemplatesNoData + '</div>';\n    }\n\n    private static selectTemplatesCb(params: any, t: any) {\n        var pfx: string = t.o.prefix;\n        //console.log('editorResources', editorResources);\n\n        var html: string[] = [];\n\n        html.push('<div class=\"modal-container templates-select\">');\n        html.push('<ul class=\"cbr2-tabs\" role=\"tablist\">');\n        TrumbowygSelectTemplatesPlugin.templates.forEach((templateSet, i) => {\n            html.push('<li role=\"' + templateSet.id + '\" class=\"cbr2-tabs-item ' + (i == 0 ? 'cbr-tabs-active' : '') + '\">');\n            html.push('   <a data-tab=\"' + templateSet.id + '\"  role=\"tab\" data-toggle=\"tab\">' + templateSet.label + '</a>');\n            html.push('</li>');\n        });\n\n        html.push('</ul>');\n        html.push('<div class=\"cbr-tab-content\">');\n\n\n        TrumbowygSelectTemplatesPlugin.templates.forEach((templateSet, i) => {\n            html.push('   <div role=\"tabpanel\" id=\"' + templateSet.id + '\" class=\"cbr-tab-pane ' + (i == 0 ? 'active' : '') + '\">');\n            html.push('   <ul class=\"templates-list template-gallery list-unstyled\">');\n            templateSet.elements.forEach((template: any, j: number) => {\n                template.icon = template.icon || DEFAULT_ICON;\n                html.push('   <li title=\"' + template.description + '\" class=\"item\"><label>' +\n                    '<img src=\"' + template.icon + '\" class=\"select-template-icon\"><input type=\"radio\" value=\"' + template.id + '\" name=\"template\">' +\n                    '<span class=\"title\"> ' + template.title + '</span>' +\n                    '<span class=\"description\"> ' + template.description + '</span>' +\n                    '</label></li>');\n            });\n            html.push('   </ul>');\n            html.push('   </div>');\n        });\n\n        html.push('</div>');\n        html.push('</div>');\n\n\n        //console.log('html', html);\n        var $modal = t.openModal(TrumbowygSelectTemplatesPlugin.editor.langs[TrumbowygSelectTemplatesPlugin.lang].selectTemplatesHeader, html.join(''))\n            .on('tbwconfirm', function () {\n                var selected = jQuery('input:checked', $modal);\n                var val = selected.val();\n                // console.log(val, allTemplates[val]);\n                // jQuery(this).off(pfx + 'confirm');\n\n                t.restoreRange();\n                t.syncCode();\n\n                if (val) {\n                    TrumbowygSelectTemplatesPlugin.editor.insertHtml(t, TrumbowygSelectTemplatesPlugin.allTemplates[val]);\n                }\n\n                setTimeout(function () {\n                    t.closeModal();\n                }, 250);\n            })\n            .on('tbwcancel', function () {\n                t.restoreRange();\n                t.closeModal();\n            });\n        $modal.addClass('big');\n\n        jQuery('.cbr2-tabs a', $modal).off('click').on('click', function (e: any) {\n            e.preventDefault();\n\n            jQuery('.cbr2-tabs-item', $modal).removeClass('cbr-tabs-active');\n            jQuery(this).parent().addClass('cbr-tabs-active');\n\n            //    console.log('O_O', $(this).attr('data-tab'));\n            jQuery('.cbr-tab-content .cbr-tab-pane', $modal).removeClass('active');\n            jQuery('#' + jQuery(this).attr('data-tab')).addClass('active');\n        });\n        jQuery('.template-gallery li label', $modal).off('click').on('click', function (e: any) {\n            //console.log('O_O', e, $(this));\n            jQuery('.template-gallery li', $modal).removeClass('active');\n            jQuery(this).parent().addClass('active');\n        });\n    }\n\n    public static setTemplates(templates: any[], allTemplates: any) {\n        TrumbowygSelectTemplatesPlugin.templates = templates;\n        TrumbowygSelectTemplatesPlugin.allTemplates = allTemplates;\n    }\n}\n","import {\n    Directive,\n    Input,\n    forwardRef,\n    Output,\n    EventEmitter,\n    ElementRef,\n    OnInit,\n    OnDestroy,\n    OnChanges,\n    SimpleChanges, Renderer2\n} from '@angular/core';\nimport {HttpHeaders, HttpClient} from '@angular/common/http';\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR, NG_VALIDATORS, FormControl} from '@angular/forms';\n\nimport 'rxjs/add/operator/toPromise';\n\nimport {TrumbowygTidyPlugin} from './tidy';\nimport {TrumbowygFontSizePlugin} from './font-size';\nimport {TrumbowygFontsPlugin} from './fonts';\nimport {TrumbowygSelectStylesPlugin} from './select-styles';\nimport {TrumbowygInsertLeadPlugin} from './insert-lead';\nimport {TrumbowygInsertMediaEmbedPlugin} from './insert-media-embed';\nimport {TrumbowygInsertTablePlugin} from './insert-table';\nimport {TrumbowygSelectImagesPlugin} from './select-images';\nimport {TrumbowygSelectResourcesPlugin} from './select-resources';\nimport {TrumbowygSelectTemplatesPlugin} from './select-templates';\n\nconst LEGACY_BOOTSTRAP_ID = 'legacy-bootstrap-styles';\n\ndeclare var jQuery: any;\n\n@Directive({\n    selector: '[trumbowyg-editor]',\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => TrumbowygEditor),\n            multi: true\n        },\n        {\n            provide: NG_VALIDATORS,\n            useExisting: forwardRef(() => TrumbowygEditor),\n            multi: true\n        }\n    ]\n})\nexport class TrumbowygEditor implements ControlValueAccessor, OnInit, OnChanges, OnDestroy {\n    public static modes: any = {};\n    public static langs: any = {};\n    public static inited: boolean = false;\n    public static localImageRegexp: RegExp = /src\\=\\\"data\\:image\\/(.*)\\\"/gi;\n\n    @Input('has-auto-save') hasAutoSave: boolean = false;\n    @Input('auto-save-key') autoSaveKey: string = '';\n    @Input('last-update') lastUpdate: number = 0;\n    @Input() addBtns: any = [];\n    @Input() mode: string;\n    @Input() lang: string;\n    @Input() base64Image: any;\n\n    private _name: string;\n    private _value: string;\n\n    private _required: boolean = false;\n\n    @Output() base64ImageInserted: any = new EventEmitter();\n\n    public onInit: any = new EventEmitter();\n\n    private element: any;\n\n    private _autoSaveTimer: any = null;\n    private _autoSaved: any = null;\n\n    constructor(private el: ElementRef,\n                private render: Renderer2,\n                private http: HttpClient) {\n        this._required = this.el.nativeElement.hasAttribute('required');\n        this._name = this.el.nativeElement.getAttribute('name');\n        // console.log('el', this._name, this._required);\n    }\n\n    validate(c: FormControl) {\n        if (!this._required) {\n            return null;\n        }\n\n        if (c.value && c.value.length > 0) {\n            return null;\n        }\n\n        // console.log('TrumbowygEditor NG_VALIDATORS', this._name, c.value, 'invalid');\n\n        return {\n            required: true\n        };\n    }\n\n    propagateChange = (_: any) => {\n    };\n\n    registerOnChange(fn: any) {\n        this.propagateChange = fn;\n    }\n\n    registerOnTouched() {\n        // console.log('registerOnTouched');\n    }\n\n    onChange(value: any) {\n        // console.log('onChange', this._value, value);\n        this._value = value;\n\n        if (this.hasAutoSave) {\n            this._autoSave();\n        }\n    }\n\n    private _autoSave() {\n        clearTimeout(this._autoSaveTimer);\n        this._autoSaveTimer = setTimeout(() => {\n            this._saveToServer();\n        }, 500);\n    }\n\n    private _saveToServer() {\n        const headers = new HttpHeaders({\n            'Content-Type': 'application/json',\n            'If-Modified-Since': 'Mon, 26 Jul 1997 05:00:00 GMT',//no cache\n            'Cache-Control': 'no-cache',//no cache\n            'Pragma': 'no-cache'//no cache\n        });\n\n        this.http.post(TrumbowygTidyPlugin.editor.autoSaveUrl + '?action=auto-save', JSON.stringify({\n            key: this.autoSaveKey,\n            content: this._value\n        }), {\n            headers: headers\n        }).toPromise()\n            .then((res: any) => {\n                // console.log('_autoSave res', res.json());\n            });\n    }\n\n    private _checkAutoSave() {\n        this.http.get(TrumbowygTidyPlugin.editor.autoSaveUrl +\n            '?action=check-auto-save&key=' + this.autoSaveKey).toPromise()\n            .then((res: any) => {\n                this._autoSaved = res;\n                // console.log('_checkAutoSave res', this._autoSaved, this.lastUpdate);\n\n                if (this._autoSaved && parseInt(this._autoSaved.date, 10) > this.lastUpdate) {\n                    this._buildAutoSaveToolbar();\n                    // console.log('_hasAutoSave');\n                }\n            });\n    }\n\n    private _buildAutoSaveToolbar() {\n        this.element.data('trumbowyg').$box.append('<div class=\"trumbowyg-auto-save\">' +\n            '<span class=\"title\">' + TrumbowygEditor.langs[this.lang].hasAutoSavedMsg + '</span>' +\n            '<span class=\"buttons\">' +\n            '<button type=\"button\" class=\"button-sm-default\">' + TrumbowygEditor.langs[this.lang].autoSaveCancel + '</button>' +\n            '<button type=\"button\" class=\"button-sm-success\">' + TrumbowygEditor.langs[this.lang].autoSaveRestore + '</button>' +\n            '</span>' +\n            '</div>');\n\n        setTimeout(() => {\n            jQuery('.trumbowyg-auto-save .button-sm-default', this.element.data('trumbowyg').$box)\n                .on('click', (e: any) => {\n                    // console.log('cancel');\n                    e.target.innerHTML = '...';\n                    this.clearAutoSaved();\n                });\n\n            jQuery('.trumbowyg-auto-save .button-sm-success', this.element.data('trumbowyg').$box)\n                .on('click', (e: any) => {\n                    // console.log('restore');\n                    e.target.innerHTML = '...';\n                    this.restoreAutoSave();\n                    jQuery('.trumbowyg-auto-save').hide();\n                });\n        }, 200);\n    }\n\n    public clearAutoSaved() {\n        this.http.get(TrumbowygTidyPlugin.editor.autoSaveUrl +\n            '?action=clear-auto-save&key=' + this.autoSaveKey).toPromise()\n            .then((res: any) => {\n                // console.log('_checkAutoSave res', res.json());\n                this._autoSaved = null;\n                jQuery('.trumbowyg-auto-save').hide();\n            });\n    }\n\n    public restoreAutoSave() {\n        if (this._autoSaved) {\n            this._value = this._autoSaved.content;\n            this.element.trumbowyg('html', this._value);\n            this.propagateChange(this._value);\n            this.lastUpdate = parseInt(this._autoSaved.date, 10);\n        }\n    }\n\n    writeValue(value: any) {\n        // console.log('writeValue', this._name, value);\n\n        if (value != null) {\n            this._value = value;\n\n            // if (this._value.length == 0 && (/webkit/i).test(navigator.userAgent)) {\n            //     this.element.trumbowyg('html', '<p></p>');\n            // } else {\n            this.element.trumbowyg('html', this._value);\n            // }\n        }\n    }\n\n    private init(lang: string) {\n        TrumbowygEditor.inited = true;\n// console.log('init', lang);\n// console.log('TrumbowygEditor.langs', TrumbowygEditor.langs);\n        if (TrumbowygEditor.langs) {\n            jQuery.trumbowyg.langs = TrumbowygEditor.langs;\n        }\n\n        jQuery.trumbowyg.svgPath = (<any>window).TrumbowygEditorSvgPath || '/bower_components/trumbowyg/dist/ui/icons.svg';\n        jQuery.trumbowyg.tidyUrl = '/api/rest.php/trumbowyg?action=tidy';\n        jQuery.trumbowyg.autoSaveUrl = '/api/rest.php/trumbowyg';\n\n        jQuery.trumbowyg.insertHtml = function (t: any, html: string) {\n            try {\n                try {\n                    // <= IE10\n                    t.doc.selection.createRange().pasteHTML(html);\n                } catch (err) {\n                    // IE 11\n                    var el = document.createElement(\"div\");\n                    el.innerHTML = html;\n                    var frag: any = document.createDocumentFragment(),\n                        node: any,\n                        lastNode: any;\n                    while ((node = el.firstChild)) {\n                        lastNode = frag.appendChild(node);\n                    }\n                    var range = t.doc.getSelection().getRangeAt(0);\n                    range.deleteContents();\n                    range.insertNode(frag);\n                }\n            } catch (err) {\n                // Not IE\n                t.execCmd('insertHTML', html);\n            }\n            t.syncCode();\n            t.$c.trigger('tbwchange');\n        }\n\n        var btnsGrps = {\n            design: ['bold', 'italic', 'underline', 'strikethrough'],\n            semantic: ['strong', 'em', 'del'],\n            justify: ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],\n            lists: ['unorderedList', 'orderedList']\n        };\n\n        TrumbowygTidyPlugin.init(jQuery.trumbowyg, lang, this.http);\n        TrumbowygFontSizePlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygFontsPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertLeadPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectStylesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertTablePlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygInsertMediaEmbedPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectImagesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectResourcesPlugin.init(jQuery.trumbowyg, lang);\n        TrumbowygSelectTemplatesPlugin.init(jQuery.trumbowyg, lang);\n\n        //console.trace();\n        //console.log('init', jQuery.trumbowyg);\n\n\n        TrumbowygEditor.modes = {\n            inline: [\n                'removeformat',\n                '|',\n                btnsGrps.design, '|',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                'insertMediaEmbed',\n                'selectImage'\n            ],\n            simple: [\n                'removeformat',\n                '|',\n                btnsGrps.design, '|',\n                'fontName',\n                'fontSize',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            noImage: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            extend: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'selectTemplates',\n                'insertTable',\n                'horizontalRule',\n                'fullscreen'\n            ],\n            full: [\n                'viewHTML',\n                'removeformat',\n                '|',\n                btnsGrps.design,\n                'selectStyles',\n                '|',\n                'formatting',\n                'fontName',\n                'fontSize',\n                'foreColor',\n                'backColor',\n                '|',\n                btnsGrps.justify,\n                '|',\n                btnsGrps.lists,\n                '|',\n                'link',\n                'insertMediaEmbed',\n                'selectImage',\n                'selectResources',\n                'selectTemplates',\n                'insertTable',\n                'horizontalRule',\n                'fullscreen'\n            ]\n        };\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (this.base64Image) {\n            //console.log('ngOnChanges base64Image', this.base64Image);\n            var el = jQuery('<div>' + this.element.trumbowyg('html') + '</div>');\n            el.find('#' + this.base64Image.uid).attr('src', this.base64Image.file);\n            this.base64Image = null;\n            this.element.trumbowyg('html', el.html());\n        }\n    }\n\n    private detectBase64Insert(html: string) {\n        //console.log('detectBase64Insert', html);\n        if (TrumbowygEditor.localImageRegexp.test(html)) {\n            var images: any[] = [];\n\n            var el = jQuery('<div>' + html + '</div>');\n            var uid: string;\n            el.find('img[src^=\"data:image\"]').each(function () {\n                if (!jQuery(this).attr('id')) {\n                    uid = Math.random().toString(36).substring(2, 9);\n                    jQuery(this).attr('id', uid);\n                    images.push({\n                        uid: uid,\n                        src: this.src\n                    });\n                }\n            });\n            this.element.trumbowyg('html', el.html());\n            //console.log('images', images);\n            images.forEach(image => {\n                this.base64ImageInserted.emit(image);\n            });\n            return true;\n        }\n        return false;\n    }\n\n    ngOnInit() {\n        //console.log('TrumbowygEditor ngOnInit');\n        //console.log('TrumbowygEditor langs', TrumbowygEditor.langs);\n        this.lang = this.lang || 'en';\n\n        this.init(this.lang);\n        this.onInit.emit();\n\n        this.mode = this.mode || 'simple';\n        this.element = jQuery(this.el.nativeElement);\n\n        var tmpBtns = TrumbowygEditor.modes[this.mode];\n        this.addBtns = this.addBtns || null;\n\n        let addElement = 0;\n        if (this.mode == 'extend' || this.mode == 'full') {\n            if (!document.getElementById(LEGACY_BOOTSTRAP_ID)) {\n                let linkContainer = document.createElement(\"LINK\");\n                this.render.setAttribute(linkContainer, 'id', LEGACY_BOOTSTRAP_ID);\n                this.render.setAttribute(linkContainer, 'rel', 'stylesheet');\n                this.render.setAttribute(linkContainer, 'href', '/node_modules/ng2-trumbowyg/assets/modified-bootstrap.css');\n                document.body.appendChild(linkContainer);\n            }\n        }\n        if (this.addBtns && this.mode == 'extend') {\n            console.log('TrumbowygEditor addBtns', this.addBtns);\n            this.addBtns.forEach((value: any) => {\n                if (value == 'selectStyles') {\n                    let elemIndex = TrumbowygEditor.modes['full'].indexOf(value);\n                    tmpBtns.splice(elemIndex, 0, value);\n                    addElement++;\n                }\n\n                if (value == 'selectResources') {\n                    let elemIndex = TrumbowygEditor.modes['full'].indexOf(value);\n                    let countPreviousElements = 1;\n                    tmpBtns.splice(elemIndex - countPreviousElements + addElement, 0, value);\n                }\n            });\n        }\n\n        this.element.trumbowyg('destroy');\n        this.element.trumbowyg({\n            btns: tmpBtns,\n            lang: this.lang,\n            mobile: true,\n            semantic: false,\n            autogrow: this.mode == 'inline',\n            tablet: true\n        })\n            .on('tbwpaste', () => {\n                var html: string = this.element.trumbowyg('html');\n                //console.log('tbwpaste', html);\n                if (!this.detectBase64Insert(html)) {\n                    this.propagateChange(html);\n                    this.onChange(html);\n                }\n                //console.log('tbwpaste', html);\n                //console.log('self.ngModelChange', self.ngModelChange);\n            })\n            .on('tbwchange', () => {\n                var html: string = this.element.trumbowyg('html');\n                //console.log('tbwchange', html);\n                if (!this.detectBase64Insert(html)) {\n                    this.propagateChange(html);\n                    this.onChange(html);\n                }\n                //console.log('tbwchange', html);\n                //console.log('self.ngModelChange', self.ngModelChange);\n            })\n            .on('tbwinit', (e: any) => {\n                let t: any = this.element.data('trumbowyg');\n                // console.log('tbwinit', e, t, this.element);\n                if (t) {\n                    t.$box.addClass('trumbowyg-' + this.mode);\n                    t.$ed.addClass('page-container');\n                    t.$ed.addClass('legacy-bootstrap');\n                    // console.log('tbwinit', e, t, t.$ed, t.$box);\n                    if (t.$box.width() >= 1200) {\n                        t.$ed.addClass('bordered');\n                    }\n                }\n            });\n\n        setTimeout(() => {\n            // console.log('hasAutoSave', this.hasAutoSave);\n            if (this.hasAutoSave) {\n                this._checkAutoSave();\n            }\n        }, 500);\n    }\n\n    ngOnDestroy() {\n        this.element.trumbowyg('destroy');\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {HttpClientModule} from '@angular/common/http';\n\nimport {TrumbowygEditor} from './editor';\n\n@NgModule({\n    imports: [\n        HttpClientModule\n    ],\n    declarations: [\n        TrumbowygEditor\n    ],\n    exports: [\n        TrumbowygEditor\n    ]\n})\nexport class TrumbowygEditorModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["EventEmitter","HttpHeaders","NG_VALUE_ACCESSOR","forwardRef","NG_VALIDATORS","Directive","Input","Output","HttpClientModule","NgModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAGA;SAyCC;QAtCiB,wBAAI,GAAX,UAAY,MAAW,EAAE,IAAY,EAAE,IAAgB;YAC1D,mBAAmB,CAAC,MAAM,GAAG,MAAM,CAAC;YAEpC,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG;gBAClB,IAAI,EAAE,UAAC,CAAM;;oBAGT,CAAC,CAAC,MAAM,GAAG;wBACP,IAAI,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;wBACxB,CAAC,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;wBAC5B,UAAU,CAAC;4BACP,CAAC,CAAC,GAAG,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC;4BAC3B,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,gBAAgB,GAAG,MAAM,GAAG,gBAAgB,CAAC,CAAC;4BAC1E,CAAC,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC;4BAC3C,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,GAAG,MAAM,GAAG,iBAAiB,CAAC,CAAC,WAAW,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC;4BACjF,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,gBAAgB,CAAC,EAAE;gCAC5C,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC,CAAC;6BAC9B;iCAAM;gCACH,IAAI,mBAAmB,CAAC,MAAM,CAAC,OAAO,EAAE;;oCAEpC,IAAI,CAAC,IAAI,CACL,mBAAmB,CAAC,MAAM,CAAC,OAAO,EAClC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE;wCACV,YAAY,EAAE,MAAM;qCACvB,CAAC;yCACD,SAAS,EAAE;yCACX,IAAI,CAAC,UAAC,GAAQ;;wCAEX,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;qCAClB,CAAC,CAAC;iCACV;gCACD,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC;6BAChC;yBACJ,EAAE,CAAC,CAAC,CAAC;qBACT,CAAC;iBACL;aACJ,CAAA;SACJ;kCACJ;KAAA;;;QC1CD;;QAIkB,4BAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,uBAAuB,CAAC,MAAM,GAAG,MAAM,CAAC;YAExC,uBAAuB,CAAC,SAAS,GAAG,EAAE,CAAC;YAEvC,IAAI,CAAC,GAAG,CAAC,CAAC;YACV,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;;gBAEhB,uBAAuB,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC;aAC9E;;YAGD,MAAM,CAAC,OAAO,CAAC,QAAQ,GAAG;gBACtB,IAAI,EAAE,UAAC,SAAc;;;oBAGjB,SAAS,CAAC,SAAS,CAAC,UAAU,EAAE;wBAC5B,QAAQ,EAAE,uBAAuB,CAAC,aAAa,CAAC,UAAU,EAAE,SAAS,CAAC;qBACzE,CAAC,CAAC;iBACN;aACJ,CAAA;SACJ;QAEc,qCAAa,GAApB,UAAqB,IAAS,EAAE,SAAc;YAClD,IAAI,QAAQ,GAAa,EAAE,CAAC;YAE5B,uBAAuB,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,IAAY,EAAE,CAAS;gBAC9D,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC;gBACzB,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;oBACrB,EAAE,EAAE,UAAC,KAAU,EAAE,CAAM;;wBAEnB,QAAQ,CAAC,WAAW,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;wBAC/C,CAAC,CAAC,QAAQ,EAAE,CAAC;qBAChB;oBACD,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,CAAC,GAAG,CAAC;iBACf,CAAC,CAAC;gBACH,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACtB,CAAC,CAAC;YAGH,OAAO,QAAQ,CAAC;SACnB;;;IA5Ca,iCAAS,GAAa,EAAE;;;QCF1C;SA2DC;QAvDiB,yBAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,oBAAoB,CAAC,MAAM,GAAG,MAAM,CAAC;;YAGrC,oBAAoB,CAAC,KAAK,GAAG;gBACzB,OAAO;gBACP,SAAS;gBACT,aAAa;gBACb,SAAS;gBACT,WAAW;gBACX,QAAQ;gBACR,WAAW;gBACX,YAAY;gBACZ,OAAO;gBACP,QAAQ;gBACR,iBAAiB;gBACjB,cAAc;gBACd,SAAS;aACZ,CAAC;;YAGF,MAAM,CAAC,OAAO,CAAC,QAAQ,GAAG;gBACtB,IAAI,EAAE,UAAU,SAAc;;oBAE1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,QAAQ,IAAI,EAAE,CAAC;oBAClE,SAAS,CAAC,SAAS,CAAC,UAAU,EAAE;wBAC5B,QAAQ,EAAE,oBAAoB,CAAC,aAAa,CAAC,UAAU,EAAE,SAAS,CAAC;qBACtE,CAAC,CAAC;iBACN;aACJ,CAAA;SAEJ;QAEc,kCAAa,GAApB,UAAqB,IAAS,EAAE,SAAc;YAClD,IAAI,QAAQ,GAAa,EAAE,CAAC;YAE5B,oBAAoB,CAAC,KAAK,CAAC,OAAO,CAAC,UAAC,IAAY,EAAE,CAAS;;gBAEvD,IAAI,SAAS,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;gBACrE,IAAI,GAAG,GAAG,IAAI,GAAG,GAAG,GAAG,SAAS,CAAC;gBACjC,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;oBACrB,EAAE,EAAE,UAAU,KAAU,EAAE,CAAM;;wBAE5B,QAAQ,CAAC,WAAW,CAAC,UAAU,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;wBAC/C,CAAC,CAAC,QAAQ,EAAE,CAAC;qBAChB;oBACD,IAAI,EAAE,IAAI;oBACV,KAAK,EAAE,IAAI;iBACd,CAAC,CAAC;gBACH,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACtB,CAAC,CAAC;YAGH,OAAO,QAAQ,CAAC;SACnB;mCACJ;KAAA;;;QC3DD;;QAMkB,gCAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,2BAA2B,CAAC,MAAM,GAAG,MAAM,CAAC;YAC5C,2BAA2B,CAAC,IAAI,GAAG,IAAI,CAAC;YACxC,MAAM,CAAC,OAAO,CAAC,YAAY,GAAG;gBAC1B,IAAI,EAAE,UAAU,SAAc;oBAC1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC;oBAE1E,SAAS,CAAC,SAAS,CAAC,cAAc,EAAE;wBAChC,EAAE,EAAE,UAAU,MAAW;4BACrB,2BAA2B,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;yBACjE;qBACJ,CAAC,CAAC;iBACN;gBACD,GAAG,EAAE,KAAK;aACb,CAAA;SACJ;QAEc,0CAAc,GAArB,UAAsB,MAAW,EAAE,CAAM;YAE7C,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YACrB,IAAI,IAAI,GAAa,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,6CAA6C,CAAC,CAAC;YACzD,IAAI,CAAC,IAAI,CAAC,4DAA4D,CAAC,CAAC;YACxE,2BAA2B,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,KAAW;gBACtD,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,WAAW,GAAG,8BAA8B;oBAC3E,YAAY,GAAG,KAAK,CAAC,IAAI,GAAG,4DAA4D,GAAG,KAAK,CAAC,EAAE,GAAG,oBAAoB;oBAC1H,uBAAuB,GAAG,KAAK,CAAC,KAAK,GAAG,SAAS;oBACjD,eAAe,CAAC,CAAC;aACxB,CAAC,CAAC;YACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEpB,IAAI,kBAAkB,GAAW,IAAI,CAAC;YACtC,IAAI,MAAM,GAAG,CAAC,CAAC,SAAS,CAAC,2BAA2B,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC,oBAAoB,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBACnI,EAAE,CAAC,YAAY,EAAE;gBACd,IAAI,QAAQ,GAAG,MAAM,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;gBAE/C,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;oBACrB,IAAI,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC;;oBAE3C,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;oBACvD,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC;oBACrC,MAAM,CAAC,MAAM,CAAC,8EAA8E,GAAG,OAAO,GAAG,gBAAgB,CAAC,CAAC;oBAC3H,CAAC,CAAC,YAAY,EAAE,CAAC;oBACjB,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;iBAC7B;gBAED,UAAU,CAAC;oBACP,CAAC,CAAC,UAAU,EAAE,CAAC;iBAClB,EAAE,GAAG,CAAC,CAAC;aACX,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE;gBACb,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,UAAU,EAAE,CAAC;aAClB,CAAC,CAAC;YAEP,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAEvB,MAAM,CAAC,uBAAuB,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAK;gBAC5E,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBACxD,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;aAC5C,CAAC,CAAC;SAEN;QAAA,CAAC;QAEY,qCAAS,GAAhB,UAAiB,SAAgB;YACpC,2BAA2B,CAAC,SAAS,GAAG,SAAS,CAAC;SACrD;;;IAzEa,qCAAS,GAAU,EAAE;;;QCDvC;SAgCC;QA7BiB,8BAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,yBAAyB,CAAC,MAAM,GAAG,MAAM,CAAC;YAE1C,MAAM,CAAC,OAAO,CAAC,IAAI,GAAG;gBAClB,IAAI,EAAE,UAAC,SAAc;;oBAGjB,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE;wBACxB,EAAE,EAAE;4BACA,IAAI,iBAAiB,GAAG,SAAS,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC;4BAErD,IAAI,iBAAiB,CAAC,UAAU,EAAE;gCAC9B,IAAI,KAAK,GAAG,iBAAiB,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,UAAU,EAAE,CAAC;gCACzD,KAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gCAC3D,iBAAiB,CAAC,eAAe,EAAE,CAAC;gCACpC,iBAAiB,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;6BACrC;4BAED,SAAS,CAAC,QAAQ,EAAE,CAAC;4BAErB,SAAS,CAAC,sBAAsB,EAAE,CAAC;4BACnC,SAAS,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;yBACrC;qBACJ,CAAC,CAAC;oBAEH,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,GAAG,CAAC,GAAG,EAAE,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC;iBAC/F;aACJ,CAAA;SACJ;wCACJ;KAAA;;;QChCD;SA8CC;QA3CiB,oCAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,+BAA+B,CAAC,MAAM,GAAG,MAAM,CAAC;YAEhD,MAAM,CAAC,OAAO,CAAC,gBAAgB,GAAG;gBAC9B,IAAI,EAAE,UAAC,SAAc;oBACjB,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,gBAAgB,IAAI,EAAE,CAAC;oBAClF,SAAS,CAAC,SAAS,CAAC,kBAAkB,EAAE;wBACpC,EAAE,EAAE,UAAC,MAAW,EAAE,CAAM;;4BAEpB,IAAI,CAAC,GAAG,SAAS,CAAC;4BAElB,IAAI,IAAI,GAAa,EAAE,CAAC;4BACxB,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;4BAC3C,IAAI,CAAC,IAAI,CAAC,kCAAkC,CAAC,CAAC;4BAC9C,IAAI,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;4BACnC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;4BACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;4BAEpB,OAAO,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC;4BAEhC,IAAI,MAAM,GAAG,CAAC,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iCAChD,EAAE,CAAC,YAAY,EAAE;gCACd,CAAC,CAAC,YAAY,EAAE,CAAC;gCACjB,CAAC,CAAC,QAAQ,EAAE,CAAC;gCAEb,IAAI,IAAI,GAAG,MAAM,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC;gCAC5C,IAAI,IAAI,EAAE;oCACN,+BAA+B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;iCAC9D;gCAED,UAAU,CAAC;oCACP,CAAC,CAAC,UAAU,EAAE,CAAC;iCAClB,EAAE,GAAG,CAAC,CAAC;6BACX,CAAC;iCACD,EAAE,CAAC,WAAW,EAAE;gCACb,CAAC,CAAC,YAAY,EAAE,CAAC;gCACjB,CAAC,CAAC,UAAU,EAAE,CAAC;6BAClB,CAAC,CAAC;yBACV;qBACJ,CAAC,CAAC;iBACN;aACJ,CAAA;SACJ;8CACJ;KAAA;;;QC9CD;;QAKkB,+BAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,0BAA0B,CAAC,MAAM,GAAG,MAAM,CAAC;YAE3C,MAAM,CAAC,OAAO,CAAC,WAAW,GAAG;gBACzB,IAAI,EAAE,UAAU,SAAc;;oBAE1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC;oBACxE,SAAS,CAAC,SAAS,CAAC,aAAa,EAAE;wBAC/B,QAAQ,EAAE,0BAA0B,CAAC,aAAa,CAAC,aAAa,EAAE,SAAS,CAAC;wBAC5E,GAAG,EAAE,OAAO;qBACf,CAAC,CAAC;oBAEH,UAAU,CAAC;wBACP,IAAI,CAAC,GAAW,CAAC,CAAC;wBAClB,IAAI,CAAC,GAAW,CAAC,CAAC;wBAClB,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;4BACjB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;gCACtB,0BAA0B,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,0BAA0B,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,8BAA8B,CAAC,CAAC;6BAClK;yBACJ;wBAED,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC;6BAC/C,GAAG,CAAC,OAAO,CAAC;6BACZ,EAAE,CAAC,OAAO,EAAE;4BACT,MAAM,CAAC,2DAA2D,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;yBAC7F,CAAC,CAAC;wBAEP,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,2DAA2D,CAAC;6BAC3E,GAAG,CAAC,uBAAuB,CAAC;;6BAE5B,KAAK,CAAC,UAAC,CAAM;;;4BAGV,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACpD,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;4BAC9C,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;;4BAE9C,0BAA0B,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;yBAG9C,EAAE,UAAC,CAAM;;4BAGN,IAAI,GAAG,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;4BACpD,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;4BAC9C,IAAI,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC;;4BAE9C,0BAA0B,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;yBAC9C,CAAC,CAAC;qBACV,EAAE,IAAI,CAAC,CAAC;iBACZ;;aAEJ,CAAA;SACJ;QAEc,qCAAU,GAAjB,UAAkB,CAAS,EAAE,CAAS;YAC1C,IAAI,IAAI,GAAa,EAAE,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,iCAAiC,CAAC,CAAC;YAC7C,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;gBAChB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;oBACrB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBAChC;gBACD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtB;YACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACtB,OAAO,IAAI,CAAC;SACf;QAEc,oCAAS,GAAhB,UAAiB,CAAS,EAAE,CAAS;YACzC,MAAM,CAAC,2DAA2D,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;YAE1F,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;gBAChB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;;oBAErB,0BAA0B,CAAC,aAAa,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;iBACnF;aACJ;SACJ;QAEc,wCAAa,GAApB,UAAqB,IAAS,EAAE,SAAc;YAClD,IAAI,QAAQ,GAAa,EAAE,CAAC;YAE5B,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,IAAI,CAAC,GAAW,CAAC,CAAC;YAClB,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;gBACjB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;oBACtB,IAAI,GAAG,GAAW,eAAe,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC;;;oBAG9D,SAAS,CAAC,SAAS,CAAC,GAAG,EAAE;wBACrB,QAAQ,EAAE,IAAI;wBACd,EAAE,EAAE,UAAU,MAAW;4BACrB,IAAI,IAAI,GAAG,0BAA0B,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;4BAG9E,SAAS,CAAC,YAAY,EAAE,CAAC;4BACzB,SAAS,CAAC,QAAQ,EAAE,CAAC;4BAErB,0BAA0B,CAAC,MAAM,CAAC,UAAU,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;yBACjE;wBACD,IAAI,EAAE,GAAG;wBACT,KAAK,EAAE;4BACH,CAAC,EAAE,CAAC;4BACJ,CAAC,EAAE,CAAC;yBACP;qBACJ,CAAC,CAAC;oBACH,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACtB;aACJ;YAED,OAAO,QAAQ,CAAC;SACnB;;;IAtHa,wCAAa,GAAQ,EAAE;;;QCDzC;;QAOkB,gCAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,2BAA2B,CAAC,MAAM,GAAG,MAAM,CAAC;YAC5C,2BAA2B,CAAC,IAAI,GAAG,IAAI,CAAC;;YAIxC,MAAM,CAAC,OAAO,CAAC,WAAW,GAAG;gBACzB,IAAI,EAAE,UAAU,SAAc;oBAC1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,WAAW,IAAI,EAAE,CAAC;;oBAExE,SAAS,CAAC,SAAS,CAAC,aAAa,EAAE;wBAC/B,EAAE,EAAE,UAAU,MAAW;;4BAErB,2BAA2B,CAAC,aAAa,CAAC,MAAM,EAAE,SAAS,EAAE,2BAA2B,CAAC,YAAY,CAAC,CAAC;yBAC1G;qBACJ,CAAC,CAAC;iBACN;gBACD,GAAG,EAAE,KAAK;aACb,CAAA;SACJ;QAEc,yCAAa,GAApB,UAAqB,MAAW,EAAE,CAAM,EAAE,YAAmB;YACjE,IAAI,GAAG,GAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;YAC7B,IAAI,CAAC,GAAW,CAAC,EACb,CAAC,GAAW,YAAY,CAAC,MAAM,CAAC;YACpC,IAAI,CAAC,IAAI,CAAC,EAAE;gBACR,OAAO;aACV;YAED,IAAI,IAAI,GAAa,EAAE,CAAC;YACxB,IAAI,IAAI,GAAQ,IAAI,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,aAAa,GAAG,GAAG,GAAG,yBAAyB,CAAC,CAAC;YAC3D,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;gBACf,IAAI,CAAC,IAAI,CAAC,2BAA2B,GAAG,CAAC,GAAG,WAAW;oBACnD,yBAAyB,GAAG,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,KAAK;oBACvD,eAAe,CAClB,CAAC;aACL;YACD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEpB,IAAI,kBAAkB,GAAW,IAAI,CAAC;YACtC,IAAI,MAAM,GAAG,CAAC,CAAC,SAAS,CAAC,2BAA2B,CAAC,MAAM,CAAC,KAAK,CAAC,2BAA2B,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAC7H,EAAE,CAAC,YAAY,EAAE;gBACd,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAEb,IAAI,kBAAkB,IAAI,IAAI,EAAE;oBAC5B,IAAI,KAAK,GAAG,YAAY,CAAC,kBAAkB,CAAC,CAAC,KAAK,IAAI,IAAI,CAAC;oBAC3D,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,YAAY,CAAC,kBAAkB,CAAC,CAAC,GAAG,CAAC,CAAC;oBAC/D,IAAI,KAAK,GAAG,IAAI,EAAE;wBACd,MAAM,CAAC,WAAW,GAAG,YAAY,CAAC,kBAAkB,CAAC,CAAC,GAAG,GAAG,eAAe,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;qBAChH;iBACJ;gBAED,UAAU,CAAC;oBACP,CAAC,CAAC,UAAU,EAAE,CAAC;iBAClB,EAAE,GAAG,CAAC,CAAC;aACX,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE;gBACb,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,UAAU,EAAE,CAAC;aAClB,CAAC,CAAC;YAEP,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;gBAClC,MAAM,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBAC3C,MAAM,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;gBAChC,kBAAkB,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC/C,CAAC,CAAC;SACN;QAAA,CAAC;QAEY,wCAAY,GAAnB,UAAoB,KAAY;YACnC,2BAA2B,CAAC,YAAY,GAAG,EAAE,CAAC;YAC9C,KAAK,CAAC,OAAO,CAAC,UAAC,GAAQ;gBACnB,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC;gBAC1D,IAAI,2BAA2B,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,EAAE;;;;oBAI3E,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE;wBACZ,IAAI,MAAM,GAAG,IAAI,KAAK,EAAE,CAAC;wBACzB,MAAM,CAAC,YAAY,CAAC,QAAQ,EAAE,2BAA2B,CAAC,YAAY,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC;wBACpF,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC;4BACvB,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,IAAU,IAAK,CAAC,KAAK,EAAE;gCACzC,IAAI,IAAI,GAAG,QAAQ,CAAO,IAAK,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC;gCACxD,2BAA2B,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,KAAK,GAAS,IAAK,CAAC,KAAK,CAAC;6BAC5E;yBACJ,CAAA;wBACD,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC;wBACrB,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC;qBACpB;oBACD,2BAA2B,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACtD;aACJ,CAAC,CAAC;SACN;;;IArGa,wCAAY,GAAU,EAAE,CAAC;IAIzB,4CAAgB,GAAa,CAAC,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC;;;QCL1F;;QAUkB,mCAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,8BAA8B,CAAC,MAAM,GAAG,MAAM,CAAC;YAC/C,8BAA8B,CAAC,IAAI,GAAG,IAAI,CAAC;;YAG3C,MAAM,CAAC,OAAO,CAAC,eAAe,GAAG;gBAC7B,IAAI,EAAE,UAAU,SAAc;oBAC1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,IAAI,EAAE,CAAC;oBAChF,SAAS,CAAC,SAAS,CAAC,iBAAiB,EAAE;wBACnC,EAAE,EAAE,UAAU,MAAW;;4BAErB,8BAA8B,CAAC,iBAAiB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;yBACvE;qBACJ,CAAC,CAAC;iBACN;gBACD,GAAG,EAAE,KAAK;aACb,CAAA;SACJ;QAEc,wCAAS,GAAhB,UAAiB,GAAW;YAChC,OAAO,8BAA8B,CAAC,MAAM,CAAC,KAAK,CAAC,8BAA8B,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;SAC/F;QAEc,yCAAU,GAAjB,UAAkB,GAAW,EAAE,IAAc,EAAE,KAAY;YAC/D,KAAK,CAAC,OAAO,CAAC,UAAC,QAAa;;gBAExB,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBAC/B,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBACrB,IAAI,CAAC,IAAI,CAAC,6BAA6B,GAAG,GAAG,GAAG,aAAa,GAAG,QAAQ,CAAC,EAAE,GAAG,IAAI;oBAC9E,SAAS,GAAG,QAAQ,CAAC,KAAK,GAAG,eAAe,GAAG,QAAQ,CAAC,YAAY,GAAG,WAAW,GAAG,QAAQ,CAAC,EAAE,GAAG,KAAK,CAAC,CAAC;gBAC9G,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,KAAK,GAAG,WAAW,CAAC,CAAC;gBACrD,IAAI,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;oBACzD,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,WAAW,GAAG,MAAM,CAAC,CAAC;iBACzD;gBACD,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtB,CAAC,CAAC;SACN;QAGc,gDAAiB,GAAxB,UAAyB,MAAW,EAAE,CAAM;YAChD,IAAI,GAAG,GAAG,8BAA8B,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;;YAG1D,IAAI,IAAI,GAAa,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,CAAC,kDAAkD,CAAC,CAAC;YAC9D,IAAI,CAAC,IAAI,CAAC,sCAAsC,GAAG,8BAA8B,CAAC,SAAS,CAAC,uBAAuB,CAAC,GAAE,UAAU,CAAC,CAAC;YAClI,IAAI,CAAC,IAAI,CAAC,yEAAyE,CAAC,CAAC;YACrF,IAAI,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;YAClE,IAAI,CAAC,IAAI,CAAC,kHAAkH,CAAC,CAAC;YAC9H,IAAI,CAAC,IAAI,CAAC,+GAA+G,CAAC,CAAC;YAC3H,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACjB,IAAI,CAAC,IAAI,CAAC,6HAA6H,CAAC,CAAC;YACzI,IAAI,CAAC,IAAI,CAAC,kGAAkG,CAAC,CAAC;YAC9G,IAAI,CAAC,IAAI,CAAC,iHAAiH,CAAC,CAAC;YAC7H,IAAI,CAAC,IAAI,CAAC,mEAAmE,CAAC,CAAC;YAC/E,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YAClB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;YACnD,IAAI,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;YAC1D,IAAI,CAAC,IAAI,CAAC,oCAAoC,GAAG,8BAA8B,CAAC,SAAS,CAAC,oBAAoB,CAAC,GAAG,MAAM,CAAC,CAAC;YAC1H,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,4CAA4C,CAAC,CAAC;YACxD,IAAI,CAAC,IAAI,CAAC,uCAAuC,GAAG,8BAA8B,CAAC,SAAS,CAAC,wBAAwB,CAAC,GAAG,MAAM,CAAC,CAAC;YACjI,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,yCAAyC,CAAC,CAAC;YACrD,IAAI,CAAC,IAAI,CAAC,oCAAoC,GAAG,8BAA8B,CAAC,SAAS,CAAC,yBAAyB,CAAC,GAAG,MAAM,CAAC,CAAC;YAC/H,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;YACtD,IAAI,CAAC,IAAI,CAAC,qCAAqC,GAAG,8BAA8B,CAAC,SAAS,CAAC,sBAAsB,CAAC,GAAG,MAAM,CAAC,CAAC;YAC7H,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;YACtD,IAAI,CAAC,IAAI,CAAC,qCAAqC,GAAG,8BAA8B,CAAC,SAAS,CAAC,sBAAsB,CAAC,GAAG,MAAM,CAAC,CAAC;YAC7H,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,sDAAsD,CAAC,CAAC;YAClE,IAAI,CAAC,IAAI,CAAC,8CAA8C,CAAC,CAAC;YAC1D,8BAA8B,CAAC,UAAU,CAAC,GAAG,EAAE,IAAI,EAAE,8BAA8B,CAAC,eAAe,CAAC,CAAC;YACrG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YACtB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YAEpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;YAGpB,IAAI,MAAM,GAAG,8BAA8B,CAAC,MAAM,GAAG,CAAC,CAAC,SAAS,CAAC,8BAA8B,CAAC,SAAS,CAAC,uBAAuB,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAC7I,EAAE,CAAC,YAAY,EAAE;gBAEd,IAAI,QAAQ,GAAG,MAAM,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;gBAC/C,OAAO,CAAC,GAAG,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;gBAElC,IAAI,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;;gBAEzB,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAEjC,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAEb,IAAI,GAAG,EAAE;oBACL,IAAI,IAAI,KAAK,KAAK,EAAE;wBAChB,IAAI,GAAG,OAAO,CAAC;qBAClB;oBACD,IAAI,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,EAAE;wBAClC,IAAI,GAAG,OAAO,CAAC;qBAClB;oBAED,QAAQ,IAAI;wBACR,KAAK,SAAS;;;;4BAIV,8BAA8B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,qGAAqG;gCACrJ,6DAA6D,GAAG,GAAG,GAAG,kBAAkB,GAAG,GAAG,GAAG,oCAAoC;gCACrI,mDAAmD,CAAC,CAAC;4BACzD,MAAM;wBACV,KAAK,OAAO;;;;4BAIR,8BAA8B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,qGAAqG;gCACrJ,kEAAkE,GAAG,GAAG,GAAG,kBAAkB,GAAG,GAAG,GAAG,oCAAoC;gCAC1I,mDAAmD,CAAC,CAAC;4BACzD,MAAM;wBACV,KAAK,OAAO;;;;4BAIR,8BAA8B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,oGAAoG;gCACpJ,kEAAkE,GAAG,GAAG,GAAG,kBAAkB,GAAG,GAAG,GAAG,oCAAoC;gCAC1I,mDAAmD,CAAC,CAAC;4BAEzD,MAAM;wBACV,KAAK,MAAM;;;;4BAIP,8BAA8B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,qGAAqG;gCACrJ,iEAAiE,GAAG,GAAG,GAAG,kDAAkD,GAAG,GAAG,GAAG,IAAI;gCACzI,mDAAmD,CAAC,CAAC;4BACzD,MAAM;qBACb;iBACJ;gBAED,UAAU,CAAC;oBACP,CAAC,CAAC,UAAU,EAAE,CAAC;iBAClB,EAAE,GAAG,CAAC,CAAC;aACX,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE;gBACb,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,UAAU,EAAE,CAAC;aAClB,CAAC,CAAC;YAEP,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAM;gBACpE,CAAC,CAAC,cAAc,EAAE,CAAC;gBAEnB,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBACjE,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;gBAElD,8BAA8B,CAAC,QAAQ,CAAC,IAAI,CAAC;oBACzC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK;oBAC7C,KAAK,EAAE,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE;iBAC5C,CAAC,CAAC;aACN,CAAC,CAAC;YAEH,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;gBACvD,8BAA8B,CAAC,QAAQ,CAAC,IAAI,CAAC;oBACzC,IAAI,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,KAAK;oBAC7C,KAAK,EAAE,MAAM,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,GAAG,EAAE;iBAC5C,CAAC,CAAC;aACN,CAAC,CAAC;SACN;QAEa,8CAAe,GAAtB,UAAuB,eAAsB;YAChD,8BAA8B,CAAC,eAAe,GAAG,eAAe,CAAC;;YAEjE,MAAM,CAAC,iBAAiB,EAAE,8BAA8B,CAAC,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;YACzE,IAAI,KAAK,GAAa,EAAE,CAAC;YACzB,8BAA8B,CAAC,UAAU,CAAC,8BAA8B,CAAC,GAAG,EAAE,KAAK,EAAE,eAAe,CAAC,CAAC;YACtG,MAAM,CAAC,iBAAiB,EAAE,8BAA8B,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;SAC3F;;;IAjMa,8CAAe,GAAU,EAAE,CAAC;IAE5B,uCAAQ,GAAsB,IAAIA,eAAY,EAAE;;ICPlE;IAIA,IAAM,YAAY,GAAG,sCAAsC,CAAC;;QAE5D;;QAOkB,mCAAI,GAAX,UAAY,MAAW,EAAE,IAAY;YACxC,8BAA8B,CAAC,MAAM,GAAG,MAAM,CAAC;YAC/C,8BAA8B,CAAC,IAAI,GAAG,IAAI,CAAC;;;YAM3C,MAAM,CAAC,OAAO,CAAC,eAAe,GAAG;gBAC7B,IAAI,EAAE,UAAU,SAAc;oBAC1B,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,GAAG,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC,eAAe,IAAI,EAAE,CAAC;oBAChF,SAAS,CAAC,SAAS,CAAC,iBAAiB,EAAE;wBACnC,EAAE,EAAE,UAAU,MAAW;;4BAErB,8BAA8B,CAAC,iBAAiB,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;yBACvE;qBACJ,CAAC,CAAC;iBACN;gBACD,GAAG,EAAE,KAAK;aACb,CAAA;YAGD,8BAA8B,CAAC,SAAS,CAAC,IAAI,CAAC;gBAC1C,EAAE,EAAE,aAAa;gBACjB,KAAK,EAAE,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,qBAAqB;gBAC/C,QAAQ,EAAE,EAAE;aACf,CAAC,CAAC;YACH,8BAA8B,CAAC,YAAY,CAAC,kBAAkB,CAAC;gBAC3D,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,qBAAqB,GAAG,QAAQ,CAAC;SACrE;QAEc,gDAAiB,GAAxB,UAAyB,MAAW,EAAE,CAAM;YAChD,IAAI,GAAG,GAAW,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;;YAG7B,IAAI,IAAI,GAAa,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,gDAAgD,CAAC,CAAC;YAC5D,IAAI,CAAC,IAAI,CAAC,uCAAuC,CAAC,CAAC;YACnD,8BAA8B,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,WAAW,EAAE,CAAC;gBAC5D,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC,EAAE,GAAG,0BAA0B,IAAI,CAAC,IAAI,CAAC,GAAG,iBAAiB,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;gBACjH,IAAI,CAAC,IAAI,CAAC,kBAAkB,GAAG,WAAW,CAAC,EAAE,GAAG,kCAAkC,GAAG,WAAW,CAAC,KAAK,GAAG,MAAM,CAAC,CAAC;gBACjH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;aACtB,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnB,IAAI,CAAC,IAAI,CAAC,+BAA+B,CAAC,CAAC;YAG3C,8BAA8B,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,WAAW,EAAE,CAAC;gBAC5D,IAAI,CAAC,IAAI,CAAC,8BAA8B,GAAG,WAAW,CAAC,EAAE,GAAG,wBAAwB,IAAI,CAAC,IAAI,CAAC,GAAG,QAAQ,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;gBACxH,IAAI,CAAC,IAAI,CAAC,+DAA+D,CAAC,CAAC;gBAC3E,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAC,QAAa,EAAE,CAAS;oBAClD,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,YAAY,CAAC;oBAC9C,IAAI,CAAC,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,WAAW,GAAG,wBAAwB;wBACxE,YAAY,GAAG,QAAQ,CAAC,IAAI,GAAG,4DAA4D,GAAG,QAAQ,CAAC,EAAE,GAAG,oBAAoB;wBAChI,uBAAuB,GAAG,QAAQ,CAAC,KAAK,GAAG,SAAS;wBACpD,6BAA6B,GAAG,QAAQ,CAAC,WAAW,GAAG,SAAS;wBAChE,eAAe,CAAC,CAAC;iBACxB,CAAC,CAAC;gBACH,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;gBACtB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;aAC1B,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;;YAIpB,IAAI,MAAM,GAAG,CAAC,CAAC,SAAS,CAAC,8BAA8B,CAAC,MAAM,CAAC,KAAK,CAAC,8BAA8B,CAAC,IAAI,CAAC,CAAC,qBAAqB,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;iBAC1I,EAAE,CAAC,YAAY,EAAE;gBACd,IAAI,QAAQ,GAAG,MAAM,CAAC,eAAe,EAAE,MAAM,CAAC,CAAC;gBAC/C,IAAI,GAAG,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC;;;gBAIzB,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,QAAQ,EAAE,CAAC;gBAEb,IAAI,GAAG,EAAE;oBACL,8BAA8B,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAE,8BAA8B,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;iBACzG;gBAED,UAAU,CAAC;oBACP,CAAC,CAAC,UAAU,EAAE,CAAC;iBAClB,EAAE,GAAG,CAAC,CAAC;aACX,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE;gBACb,CAAC,CAAC,YAAY,EAAE,CAAC;gBACjB,CAAC,CAAC,UAAU,EAAE,CAAC;aAClB,CAAC,CAAC;YACP,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAEvB,MAAM,CAAC,cAAc,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAM;gBACpE,CAAC,CAAC,cAAc,EAAE,CAAC;gBAEnB,MAAM,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,iBAAiB,CAAC,CAAC;gBACjE,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;;gBAGlD,MAAM,CAAC,gCAAgC,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBACvE,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;aAClE,CAAC,CAAC;YACH,MAAM,CAAC,4BAA4B,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,UAAU,CAAM;;gBAElF,MAAM,CAAC,sBAAsB,EAAE,MAAM,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;gBAC7D,MAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;aAC5C,CAAC,CAAC;SACN;QAEa,2CAAY,GAAnB,UAAoB,SAAgB,EAAE,YAAiB;YAC1D,8BAA8B,CAAC,SAAS,GAAG,SAAS,CAAC;YACrD,8BAA8B,CAAC,YAAY,GAAG,YAAY,CAAC;SAC9D;;;IAvHa,wCAAS,GAAU,EAAE,CAAC;IACtB,2CAAY,GAAQ,EAAE;;ICoBxC,IAAM,mBAAmB,GAAG,yBAAyB,CAAC;;QA+ClD,yBAAoB,EAAc,EACd,MAAiB,EACjB,IAAgB;YAFhB,OAAE,GAAF,EAAE,CAAY;YACd,WAAM,GAAN,MAAM,CAAW;YACjB,SAAI,GAAJ,IAAI,CAAY;YAxBZ,gBAAW,GAAY,KAAK,CAAC;YAC7B,gBAAW,GAAW,EAAE,CAAC;YAC3B,eAAU,GAAW,CAAC,CAAC;YACpC,YAAO,GAAQ,EAAE,CAAC;YAQnB,cAAS,GAAY,KAAK,CAAC;YAEzB,wBAAmB,GAAQ,IAAIA,eAAY,EAAE,CAAC;YAEjD,WAAM,GAAQ,IAAIA,eAAY,EAAE,CAAC;YAIhC,mBAAc,GAAQ,IAAI,CAAC;YAC3B,eAAU,GAAQ,IAAI,CAAC;YA0B/B,oBAAe,GAAG,UAAC,CAAM;aACxB,CAAC;YAtBE,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;YAChE,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;;SAE3D;QAED,kCAAQ,GAAR,UAAS,CAAc;YACnB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACjB,OAAO,IAAI,CAAC;aACf;YAED,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC/B,OAAO,IAAI,CAAC;aACf;;YAID,OAAO;gBACH,QAAQ,EAAE,IAAI;aACjB,CAAC;SACL;QAKD,0CAAgB,GAAhB,UAAiB,EAAO;YACpB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;SAC7B;QAED,2CAAiB,GAAjB;;SAEC;QAED,kCAAQ,GAAR,UAAS,KAAU;;YAEf,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YAEpB,IAAI,IAAI,CAAC,WAAW,EAAE;gBAClB,IAAI,CAAC,SAAS,EAAE,CAAC;aACpB;SACJ;QAEO,mCAAS,GAAT;YAAA,iBAKP;YAJG,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;YAClC,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC;gBAC7B,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB,EAAE,GAAG,CAAC,CAAC;SACX;QAEO,uCAAa,GAAb;YACJ,IAAM,OAAO,GAAG,IAAIC,cAAW,CAAC;gBAC5B,cAAc,EAAE,kBAAkB;gBAClC,mBAAmB,EAAE,+BAA+B;gBACpD,eAAe,EAAE,UAAU;gBAC3B,QAAQ,EAAE,UAAU;aACvB,CAAC,CAAC;YAEH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,MAAM,CAAC,WAAW,GAAG,mBAAmB,EAAE,IAAI,CAAC,SAAS,CAAC;gBACxF,GAAG,EAAE,IAAI,CAAC,WAAW;gBACrB,OAAO,EAAE,IAAI,CAAC,MAAM;aACvB,CAAC,EAAE;gBACA,OAAO,EAAE,OAAO;aACnB,CAAC,CAAC,SAAS,EAAE;iBACT,IAAI,CAAC,UAAC,GAAQ;;aAEd,CAAC,CAAC;SACV;QAEO,wCAAc,GAAd;YAAA,iBAYP;YAXG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,MAAM,CAAC,WAAW;gBAChD,8BAA8B,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE;iBAC7D,IAAI,CAAC,UAAC,GAAQ;gBACX,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC;;gBAGtB,IAAI,KAAI,CAAC,UAAU,IAAI,QAAQ,CAAC,KAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,KAAI,CAAC,UAAU,EAAE;oBACzE,KAAI,CAAC,qBAAqB,EAAE,CAAC;;iBAEhC;aACJ,CAAC,CAAC;SACV;QAEO,+CAAqB,GAArB;YAAA,iBAyBP;YAxBG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,mCAAmC;gBAC1E,sBAAsB,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,eAAe,GAAG,SAAS;gBACrF,wBAAwB;gBACxB,kDAAkD,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,cAAc,GAAG,WAAW;gBAClH,kDAAkD,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,eAAe,GAAG,WAAW;gBACnH,SAAS;gBACT,QAAQ,CAAC,CAAC;YAEd,UAAU,CAAC;gBACP,MAAM,CAAC,yCAAyC,EAAE,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;qBACjF,EAAE,CAAC,OAAO,EAAE,UAAC,CAAM;;oBAEhB,CAAC,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;oBAC3B,KAAI,CAAC,cAAc,EAAE,CAAC;iBACzB,CAAC,CAAC;gBAEP,MAAM,CAAC,yCAAyC,EAAE,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC;qBACjF,EAAE,CAAC,OAAO,EAAE,UAAC,CAAM;;oBAEhB,CAAC,CAAC,MAAM,CAAC,SAAS,GAAG,KAAK,CAAC;oBAC3B,KAAI,CAAC,eAAe,EAAE,CAAC;oBACvB,MAAM,CAAC,sBAAsB,CAAC,CAAC,IAAI,EAAE,CAAC;iBACzC,CAAC,CAAC;aACV,EAAE,GAAG,CAAC,CAAC;SACX;QAEM,wCAAc,GAAd;YAAA,iBAQN;YAPG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,mBAAmB,CAAC,MAAM,CAAC,WAAW;gBAChD,8BAA8B,GAAG,IAAI,CAAC,WAAW,CAAC,CAAC,SAAS,EAAE;iBAC7D,IAAI,CAAC,UAAC,GAAQ;;gBAEX,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;gBACvB,MAAM,CAAC,sBAAsB,CAAC,CAAC,IAAI,EAAE,CAAC;aACzC,CAAC,CAAC;SACV;QAEM,yCAAe,GAAf;YACH,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;gBACtC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;gBAC5C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;gBAClC,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC;aACxD;SACJ;QAED,oCAAU,GAAV,UAAW,KAAU;;YAGjB,IAAI,KAAK,IAAI,IAAI,EAAE;gBACf,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;;;;gBAKpB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;;aAE/C;SACJ;QAEO,8BAAI,GAAJ,UAAK,IAAY;YACrB,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC;;;YAG9B,IAAI,eAAe,CAAC,KAAK,EAAE;gBACvB,MAAM,CAAC,SAAS,CAAC,KAAK,GAAG,eAAe,CAAC,KAAK,CAAC;aAClD;YAED,MAAM,CAAC,SAAS,CAAC,OAAO,GAAS,MAAO,CAAC,sBAAsB,IAAI,+CAA+C,CAAC;YACnH,MAAM,CAAC,SAAS,CAAC,OAAO,GAAG,qCAAqC,CAAC;YACjE,MAAM,CAAC,SAAS,CAAC,WAAW,GAAG,yBAAyB,CAAC;YAEzD,MAAM,CAAC,SAAS,CAAC,UAAU,GAAG,UAAU,CAAM,EAAE,IAAY;gBACxD,IAAI;oBACA,IAAI;;wBAEA,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;qBACjD;oBAAC,OAAO,GAAG,EAAE;;wBAEV,IAAI,EAAE,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;wBACvC,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;wBACpB,IAAI,IAAI,GAAQ,QAAQ,CAAC,sBAAsB,EAAE,EAC7C,IAAS,EACT,QAAa,CAAC;wBAClB,QAAQ,IAAI,GAAG,EAAE,CAAC,UAAU,GAAG;4BAC3B,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;yBACrC;wBACD,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,YAAY,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;wBAC/C,KAAK,CAAC,cAAc,EAAE,CAAC;wBACvB,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;qBAC1B;iBACJ;gBAAC,OAAO,GAAG,EAAE;;oBAEV,CAAC,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;iBACjC;gBACD,CAAC,CAAC,QAAQ,EAAE,CAAC;gBACb,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;aAC7B,CAAA;YAED,IAAI,QAAQ,GAAG;gBACX,MAAM,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,eAAe,CAAC;gBACxD,QAAQ,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,KAAK,CAAC;gBACjC,OAAO,EAAE,CAAC,aAAa,EAAE,eAAe,EAAE,cAAc,EAAE,aAAa,CAAC;gBACxE,KAAK,EAAE,CAAC,eAAe,EAAE,aAAa,CAAC;aAC1C,CAAC;YAEF,mBAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC;YAC5D,uBAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACrD,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAClD,yBAAyB,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACvD,2BAA2B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzD,0BAA0B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACxD,+BAA+B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC7D,2BAA2B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YACzD,8BAA8B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;YAC5D,8BAA8B,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;;;YAM5D,eAAe,CAAC,KAAK,GAAG;gBACpB,MAAM,EAAE;oBACJ,cAAc;oBACd,GAAG;oBACH,QAAQ,CAAC,MAAM,EAAE,GAAG;oBACpB,UAAU;oBACV,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,GAAG;oBACH,kBAAkB;oBAClB,aAAa;iBAChB;gBACD,MAAM,EAAE;oBACJ,cAAc;oBACd,GAAG;oBACH,QAAQ,CAAC,MAAM,EAAE,GAAG;oBACpB,UAAU;oBACV,UAAU;oBACV,GAAG;oBACH,QAAQ,CAAC,OAAO;oBAChB,GAAG;oBACH,QAAQ,CAAC,KAAK;oBACd,GAAG;oBACH,MAAM;oBACN,kBAAkB;oBAClB,aAAa;oBACb,gBAAgB;oBAChB,YAAY;iBACf;gBACD,OAAO,EAAE;oBACL,UAAU;oBACV,cAAc;oBACd,GAAG;oBACH,QAAQ,CAAC,MAAM;oBACf,GAAG;oBACH,YAAY;oBACZ,UAAU;oBACV,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,GAAG;oBACH,QAAQ,CAAC,OAAO;oBAChB,GAAG;oBACH,QAAQ,CAAC,KAAK;oBACd,GAAG;oBACH,MAAM;oBACN,kBAAkB;oBAClB,gBAAgB;oBAChB,YAAY;iBACf;gBACD,MAAM,EAAE;oBACJ,UAAU;oBACV,cAAc;oBACd,GAAG;oBACH,QAAQ,CAAC,MAAM;oBACf,GAAG;oBACH,YAAY;oBACZ,UAAU;oBACV,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,GAAG;oBACH,QAAQ,CAAC,OAAO;oBAChB,GAAG;oBACH,QAAQ,CAAC,KAAK;oBACd,GAAG;oBACH,MAAM;oBACN,kBAAkB;oBAClB,aAAa;oBACb,iBAAiB;oBACjB,aAAa;oBACb,gBAAgB;oBAChB,YAAY;iBACf;gBACD,IAAI,EAAE;oBACF,UAAU;oBACV,cAAc;oBACd,GAAG;oBACH,QAAQ,CAAC,MAAM;oBACf,cAAc;oBACd,GAAG;oBACH,YAAY;oBACZ,UAAU;oBACV,UAAU;oBACV,WAAW;oBACX,WAAW;oBACX,GAAG;oBACH,QAAQ,CAAC,OAAO;oBAChB,GAAG;oBACH,QAAQ,CAAC,KAAK;oBACd,GAAG;oBACH,MAAM;oBACN,kBAAkB;oBAClB,aAAa;oBACb,iBAAiB;oBACjB,iBAAiB;oBACjB,aAAa;oBACb,gBAAgB;oBAChB,YAAY;iBACf;aACJ,CAAC;SACL;QAED,qCAAW,GAAX,UAAY,OAAsB;YAC9B,IAAI,IAAI,CAAC,WAAW,EAAE;;gBAElB,IAAI,EAAE,GAAG,MAAM,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC;gBACrE,EAAE,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBACvE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;aAC7C;SACJ;QAEO,4CAAkB,GAAlB,UAAmB,IAAY;YAA/B,iBAyBP;;YAvBG,IAAI,eAAe,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBAC7C,IAAI,MAAM,GAAU,EAAE,CAAC;gBAEvB,IAAI,EAAE,GAAG,MAAM,CAAC,OAAO,GAAG,IAAI,GAAG,QAAQ,CAAC,CAAC;gBAC3C,IAAI,GAAW,CAAC;gBAChB,EAAE,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,IAAI,CAAC;oBACnC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;wBAC1B,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBACjD,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;wBAC7B,MAAM,CAAC,IAAI,CAAC;4BACR,GAAG,EAAE,GAAG;4BACR,GAAG,EAAE,IAAI,CAAC,GAAG;yBAChB,CAAC,CAAC;qBACN;iBACJ,CAAC,CAAC;gBACH,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC;;gBAE1C,MAAM,CAAC,OAAO,CAAC,UAAA,KAAK;oBAChB,KAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACxC,CAAC,CAAC;gBACH,OAAO,IAAI,CAAC;aACf;YACD,OAAO,KAAK,CAAC;SAChB;QAED,kCAAQ,GAAR;YAAA,iBA0FC;;;YAvFG,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;YAE9B,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACrB,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;YAEnB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC;YAClC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC;YAE7C,IAAI,OAAO,GAAG,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC/C,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC;YAEpC,IAAI,UAAU,GAAG,CAAC,CAAC;YACnB,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,IAAI,IAAI,CAAC,IAAI,IAAI,MAAM,EAAE;gBAC9C,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,mBAAmB,CAAC,EAAE;oBAC/C,IAAI,aAAa,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;oBACnD,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,EAAE,mBAAmB,CAAC,CAAC;oBACnE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,KAAK,EAAE,YAAY,CAAC,CAAC;oBAC7D,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,MAAM,EAAE,2DAA2D,CAAC,CAAC;oBAC7G,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,CAAC;iBAC5C;aACJ;YACD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI,QAAQ,EAAE;gBACvC,OAAO,CAAC,GAAG,CAAC,yBAAyB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;gBACrD,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,UAAC,KAAU;oBAC5B,IAAI,KAAK,IAAI,cAAc,EAAE;wBACzB,IAAI,SAAS,GAAG,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBAC7D,OAAO,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;wBACpC,UAAU,EAAE,CAAC;qBAChB;oBAED,IAAI,KAAK,IAAI,iBAAiB,EAAE;wBAC5B,IAAI,SAAS,GAAG,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;wBAC7D,IAAI,qBAAqB,GAAG,CAAC,CAAC;wBAC9B,OAAO,CAAC,MAAM,CAAC,SAAS,GAAG,qBAAqB,GAAG,UAAU,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;qBAC5E;iBACJ,CAAC,CAAC;aACN;YAED,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YAClC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;gBACnB,IAAI,EAAE,OAAO;gBACb,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,MAAM,EAAE,IAAI;gBACZ,QAAQ,EAAE,KAAK;gBACf,QAAQ,EAAE,IAAI,CAAC,IAAI,IAAI,QAAQ;gBAC/B,MAAM,EAAE,IAAI;aACf,CAAC;iBACG,EAAE,CAAC,UAAU,EAAE;gBACZ,IAAI,IAAI,GAAW,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;;gBAElD,IAAI,CAAC,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;oBAChC,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAC3B,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;iBACvB;;;aAGJ,CAAC;iBACD,EAAE,CAAC,WAAW,EAAE;gBACb,IAAI,IAAI,GAAW,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;;gBAElD,IAAI,CAAC,KAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;oBAChC,KAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;oBAC3B,KAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;iBACvB;;;aAGJ,CAAC;iBACD,EAAE,CAAC,SAAS,EAAE,UAAC,CAAM;gBAClB,IAAI,CAAC,GAAQ,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;;gBAE5C,IAAI,CAAC,EAAE;oBACH,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,KAAI,CAAC,IAAI,CAAC,CAAC;oBAC1C,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;oBACjC,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;;oBAEnC,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,IAAI,EAAE;wBACxB,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;qBAC9B;iBACJ;aACJ,CAAC,CAAC;YAEP,UAAU,CAAC;;gBAEP,IAAI,KAAI,CAAC,WAAW,EAAE;oBAClB,KAAI,CAAC,cAAc,EAAE,CAAC;iBACzB;aACJ,EAAE,GAAG,CAAC,CAAC;SACX;QAED,qCAAW,GAAX;YACI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;SACrC;;;IAnda,qBAAK,GAAQ,EAAE,CAAC;IAChB,qBAAK,GAAQ,EAAE,CAAC;IAChB,sBAAM,GAAY,KAAK,CAAC;IACxB,gCAAgB,GAAW,8BAA8B,CAAC;kFAJ/D,eAAe;iFAAf,eAAe,mXAbb;gBACP;oBACI,OAAO,EAAEC,uBAAiB;oBAC1B,WAAW,EAAEC,aAAU,CAAC,cAAM,OAAA,eAAe,GAAA,CAAC;oBAC9C,KAAK,EAAE,IAAI;iBACd;gBACD;oBACI,OAAO,EAAEC,mBAAa;oBACtB,WAAW,EAAED,aAAU,CAAC,cAAM,OAAA,eAAe,GAAA,CAAC;oBAC9C,KAAK,EAAE,IAAI;iBACd;aACJ;;2FAEQ,eAAe;sBAf3BE,YAAS;uBAAC;wBACP,QAAQ,EAAE,oBAAoB;wBAC9B,SAAS,EAAE;4BACP;gCACI,OAAO,EAAEH,uBAAiB;gCAC1B,WAAW,EAAEC,aAAU,CAAC,oCAAqB,GAAA,CAAC;gCAC9C,KAAK,EAAE,IAAI;6BACd;4BACD;gCACI,OAAO,EAAEC,mBAAa;gCACtB,WAAW,EAAED,aAAU,CAAC,oCAAqB,GAAA,CAAC;gCAC9C,KAAK,EAAE,IAAI;6BACd;yBACJ;qBACJ;uJAO2B,WAAW;0BAAlCG,QAAK;2BAAC,eAAe;oBACE,WAAW;0BAAlCA,QAAK;2BAAC,eAAe;oBACA,UAAU;0BAA/BA,QAAK;2BAAC,aAAa;oBACX,OAAO;0BAAfA,QAAK;oBACG,IAAI;0BAAZA,QAAK;oBACG,IAAI;0BAAZA,QAAK;oBACG,WAAW;0BAAnBA,QAAK;oBAOI,mBAAmB;0BAA5BC,SAAM;;;;;QClDX;;;;8FAAa,qBAAqB;sFAArB,qBAAqB;0FAVrB;gBACLC,mBAAgB;aACnB;;2FAQQ,qBAAqB;sBAXjCC,WAAQ;uBAAC;wBACN,OAAO,EAAE;4BACLD,mBAAgB;yBACnB;wBACD,YAAY,EAAE;4BACV,eAAe;yBAClB;wBACD,OAAO,EAAE;4BACL,eAAe;yBAClB;qBACJ;;;uGACY,qBAAqB,mBAN1B,eAAe,aAHfA,mBAAgB,aAMhB,eAAe;;ICbvB;;;;;;;;;;;;;;;;;;;;;;;"}